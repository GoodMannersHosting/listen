var rn=Object.defineProperty;var pt=s=>{throw TypeError(s)};var on=(s,e,t)=>e in s?rn(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var O=(s,e,t)=>on(s,typeof e!="symbol"?e+"":e,t),an=(s,e,t)=>e.has(s)||pt("Cannot "+t);var ht=(s,e,t)=>e.has(s)?pt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t);var Me=(s,e,t)=>(an(s,e,"access private method"),t);function H(){}function Ot(s){return s()}function dt(){return Object.create(null)}function Y(s){s.forEach(Ot)}function Ut(s){return typeof s=="function"}function ee(s,e){return s!=s?e==e:s!==e||s&&typeof s=="object"||typeof s=="function"}function cn(s){return Object.keys(s).length===0}function un(s,...e){if(s==null){for(const n of e)n(void 0);return H}const t=s.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function ce(s,e,t){s.$$.on_destroy.push(un(e,t))}function p(s,e){s.appendChild(e)}function B(s,e,t){s.insertBefore(e,t||null)}function M(s){s.parentNode&&s.parentNode.removeChild(s)}function Ue(s,e){for(let t=0;t<s.length;t+=1)s[t]&&s[t].d(e)}function k(s){return document.createElement(s)}function Be(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function U(s){return document.createTextNode(s)}function R(){return U(" ")}function Le(){return U("")}function P(s,e,t,n){return s.addEventListener(e,t,n),()=>s.removeEventListener(e,t,n)}function Ze(s){return function(e){return e.stopPropagation(),s.call(this,e)}}function Zt(s){return function(e){e.target===this&&s.call(this,e)}}function d(s,e,t){t==null?s.removeAttribute(e):s.getAttribute(e)!==t&&s.setAttribute(e,t)}function fn(s){return Array.from(s.childNodes)}function G(s,e){e=""+e,s.data!==e&&(s.data=e)}function X(s,e){s.value=e??""}function gt(s,e,t,n){t==null?s.style.removeProperty(e):s.style.setProperty(e,t,"")}function He(s,e,t){for(let n=0;n<s.options.length;n+=1){const i=s.options[n];if(i.__value===e){i.selected=!0;return}}(!t||e!==void 0)&&(s.selectedIndex=-1)}function pn(s){const e=s.querySelector(":checked");return e&&e.__value}function le(s,e,t){s.classList.toggle(e,!!t)}function hn(s,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(s,{detail:e,bubbles:t,cancelable:n})}let Ae;function Re(s){Ae=s}function it(){if(!Ae)throw new Error("Function called outside component initialization");return Ae}function me(s){it().$$.on_mount.push(s)}function dn(s){it().$$.on_destroy.push(s)}function Ne(){const s=it();return(e,t,{cancelable:n=!1}={})=>{const i=s.$$.callbacks[e];if(i){const l=hn(e,t,{cancelable:n});return i.slice().forEach(r=>{r.call(s,l)}),!l.defaultPrevented}return!0}}function Ht(s,e){const t=s.$$.callbacks[e.type];t&&t.slice().forEach(n=>n.call(this,e))}const ye=[],Qe=[];let xe=[];const mt=[],gn=Promise.resolve();let et=!1;function mn(){et||(et=!0,gn.then(Qt))}function Ve(s){xe.push(s)}const Ye=new Set;let we=0;function Qt(){if(we!==0)return;const s=Ae;do{try{for(;we<ye.length;){const e=ye[we];we++,Re(e),kn(e.$$)}}catch(e){throw ye.length=0,we=0,e}for(Re(null),ye.length=0,we=0;Qe.length;)Qe.pop()();for(let e=0;e<xe.length;e+=1){const t=xe[e];Ye.has(t)||(Ye.add(t),t())}xe.length=0}while(ye.length);for(;mt.length;)mt.pop()();et=!1,Ye.clear(),Re(s)}function kn(s){if(s.fragment!==null){s.update(),Y(s.before_update);const e=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,e),s.after_update.forEach(Ve)}}function bn(s){const e=[],t=[];xe.forEach(n=>s.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),xe=e}const Oe=new Set;let de;function Te(){de={r:0,c:[],p:de}}function $e(){de.r||Y(de.c),de=de.p}function Z(s,e){s&&s.i&&(Oe.delete(s),s.i(e))}function V(s,e,t,n){if(s&&s.o){if(Oe.has(s))return;Oe.add(s),de.c.push(()=>{Oe.delete(s),n&&(t&&s.d(1),n())}),s.o(e)}else n&&n()}function ue(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function re(s){s&&s.c()}function te(s,e,t){const{fragment:n,after_update:i}=s.$$;n&&n.m(e,t),Ve(()=>{const l=s.$$.on_mount.map(Ot).filter(Ut);s.$$.on_destroy?s.$$.on_destroy.push(...l):Y(l),s.$$.on_mount=[]}),i.forEach(Ve)}function ne(s,e){const t=s.$$;t.fragment!==null&&(bn(t.after_update),Y(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function _n(s,e){s.$$.dirty[0]===-1&&(ye.push(s),mn(),s.$$.dirty.fill(0)),s.$$.dirty[e/31|0]|=1<<e%31}function oe(s,e,t,n,i,l,r=null,o=[-1]){const a=Ae;Re(s);const c=s.$$={fragment:null,ctx:[],props:l,update:H,not_equal:i,bound:dt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:dt(),dirty:o,skip_bound:!1,root:e.target||a.$$.root};r&&r(c.root);let u=!1;if(c.ctx=t?t(s,e.props||{},(f,h,...g)=>{const m=g.length?g[0]:h;return c.ctx&&i(c.ctx[f],c.ctx[f]=m)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](m),u&&_n(s,f)),h}):[],c.update(),u=!0,Y(c.before_update),c.fragment=n?n(c.ctx):!1,e.target){if(e.hydrate){const f=fn(e.target);c.fragment&&c.fragment.l(f),f.forEach(M)}else c.fragment&&c.fragment.c();e.intro&&Z(s.$$.fragment),te(s,e.target,e.anchor),Qt()}Re(a)}class ae{constructor(){O(this,"$$");O(this,"$$set")}$destroy(){ne(this,1),this.$destroy=H}$on(e,t){if(!Ut(t))return H;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!cn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const wn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(wn);const ve=[];function ze(s,e=H){let t;const n=new Set;function i(o){if(ee(s,o)&&(s=o,t)){const a=!ve.length;for(const c of n)c[1](),ve.push(c,s);if(a){for(let c=0;c<ve.length;c+=2)ve[c][0](ve[c+1]);ve.length=0}}}function l(o){i(o(s))}function r(o,a=H){const c=[o,a];return n.add(c),n.size===1&&(t=e(i,l)||H),o(s),()=>{n.delete(c),n.size===0&&t&&(t(),t=null)}}return{set:i,update:l,subscribe:r}}const pe=ze(null),Ie=ze([]),Je=ze([]),ge=ze(null),tt=ze(null),kt=ze(!1),Ce="/api",K={async get(s){const e=await fetch(`${Ce}${s}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()},async post(s,e){const t=await fetch(`${Ce}${s}`,{method:"POST",headers:e instanceof FormData?{}:{"Content-Type":"application/json"},body:e instanceof FormData?e:JSON.stringify(e)});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return t.json()},async put(s,e){const t=await fetch(`${Ce}${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return t.json()},async delete(s){const e=await fetch(`${Ce}${s}`,{method:"DELETE"});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.status===204?null:e.json()},async uploadFile(s,e){return new Promise((t,n)=>{const i=new XMLHttpRequest;i.upload.addEventListener("progress",l=>{if(l.lengthComputable&&e){const r=Math.round(l.loaded/l.total*100);e(r)}}),i.addEventListener("load",()=>{if(i.status>=200&&i.status<300)try{t(JSON.parse(i.responseText))}catch{n(new Error("Failed to parse response"))}else n(new Error(i.statusText||"Upload failed"))}),i.addEventListener("error",()=>n(new Error("Network error"))),i.open("POST",`${Ce}/upload`),i.send(s)})}};function bt(s){const e=new Date(s),n=new Date-e,i=Math.floor(n/1e3),l=Math.floor(i/60),r=Math.floor(l/60),o=Math.floor(r/24);return o>0?`${o} day${o>1?"s":""} ago`:r>0?`${r} hour${r>1?"s":""} ago`:l>0?`${l} minute${l>1?"s":""} ago`:"Just now"}function fe(s){const e=Math.floor(s/60),t=Math.floor(s%60);return`${e}:${t.toString().padStart(2,"0")}`}function vn(s){let e,t,n,i,l,r,o,a,c,u,f,h,g,m;return{c(){e=k("div"),t=k("div"),n=k("h3"),n.textContent="Create New Profile",i=R(),l=k("input"),r=R(),o=k("input"),a=R(),c=k("div"),u=k("button"),u.textContent="Create",f=R(),h=k("button"),h.textContent="Cancel",d(n,"class","svelte-z7ivhd"),d(l,"type","text"),d(l,"placeholder","Profile Name"),l.required=!0,d(l,"class","svelte-z7ivhd"),d(o,"type","text"),d(o,"placeholder","Display Name (optional)"),d(o,"class","svelte-z7ivhd"),d(u,"class","btn-primary svelte-z7ivhd"),d(h,"class","btn-secondary svelte-z7ivhd"),d(c,"class","modal-actions svelte-z7ivhd"),d(t,"class","modal-content svelte-z7ivhd"),d(e,"class","modal svelte-z7ivhd")},m(b,C){B(b,e,C),p(e,t),p(t,n),p(t,i),p(t,l),X(l,s[0]),p(t,r),p(t,o),X(o,s[1]),p(t,a),p(t,c),p(c,u),p(c,f),p(c,h),g||(m=[P(l,"input",s[6]),P(o,"input",s[7]),P(u,"click",s[2]),P(h,"click",s[3]),P(t,"click",Ze(s[5])),P(e,"click",Zt(s[3])),P(e,"keydown",s[4])],g=!0)},p(b,[C]){C&1&&l.value!==b[0]&&X(l,b[0]),C&2&&o.value!==b[1]&&X(o,b[1])},i:H,o:H,d(b){b&&M(e),g=!1,Y(m)}}}function yn(s,e,t){const n=Ne();let i="",l="";async function r(){if(!i.trim()){alert("Profile name is required");return}try{const h=await K.post("/profiles",{name:i.trim(),display_name:l.trim()||null}),g=await K.get("/profiles");Ie.set(g||[]),pe.set(h),n("close"),t(0,i=""),t(1,l="")}catch(h){alert(h.message||"Failed to create profile")}}function o(){t(0,i=""),t(1,l=""),n("close")}function a(h){h.key==="Escape"&&o()}function c(h){Ht.call(this,s,h)}function u(){i=this.value,t(0,i)}function f(){l=this.value,t(1,l)}return[i,l,r,o,a,c,u,f]}class xn extends ae{constructor(e){super(),oe(this,e,yn,vn,ee,{})}}function _t(s){let e,t,n,i,l,r,o,a,c,u,f,h;return{c(){e=k("div"),t=k("div"),n=k("h3"),n.textContent="Rename Conversation",i=R(),l=k("input"),r=R(),o=k("div"),a=k("button"),a.textContent="Save",c=R(),u=k("button"),u.textContent="Cancel",d(n,"class","svelte-z7ivhd"),d(l,"type","text"),d(l,"placeholder","Conversation title"),l.required=!0,d(l,"class","svelte-z7ivhd"),d(a,"class","btn-primary svelte-z7ivhd"),d(u,"class","btn-secondary svelte-z7ivhd"),d(o,"class","modal-actions svelte-z7ivhd"),d(t,"class","modal-content svelte-z7ivhd"),d(e,"class","modal svelte-z7ivhd")},m(g,m){B(g,e,m),p(e,t),p(t,n),p(t,i),p(t,l),X(l,s[1]),p(t,r),p(t,o),p(o,a),p(o,c),p(o,u),f||(h=[P(l,"input",s[8]),P(a,"click",s[2]),P(u,"click",s[3]),P(t,"click",Ze(s[7])),P(e,"click",Zt(s[3])),P(e,"keydown",s[4])],f=!0)},p(g,m){m&2&&l.value!==g[1]&&X(l,g[1])},d(g){g&&M(e),f=!1,Y(h)}}}function Tn(s){let e,t=s[0]&&_t(s);return{c(){t&&t.c(),e=Le()},m(n,i){t&&t.m(n,i),B(n,e,i)},p(n,[i]){n[0]?t?t.p(n,i):(t=_t(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:H,o:H,d(n){n&&M(e),t&&t.d(n)}}}function $n(s,e,t){let n,i,l;ce(s,pe,m=>t(9,i=m)),ce(s,Je,m=>t(6,l=m));const r=Ne();let{conversationId:o}=e,a="";async function c(){if(!a.trim()){alert("Title cannot be empty");return}try{await K.put(`/conversations/${o}`,{title:a.trim()});const m=await K.get(`/conversations?profile_id=${i.id}`);Je.set(m||[]),ge.update(b=>(b==null?void 0:b.id)===o?{...b,title:a.trim()}:b),r("close")}catch(m){alert(m.message||"Failed to rename conversation")}}function u(){r("close")}function f(m){m.key==="Enter"?c():m.key==="Escape"&&u()}function h(m){Ht.call(this,s,m)}function g(){a=this.value,t(1,a),t(5,n),t(0,o),t(6,l)}return s.$$set=m=>{"conversationId"in m&&t(0,o=m.conversationId)},s.$$.update=()=>{s.$$.dirty&65&&t(5,n=l.find(m=>m.id===o)),s.$$.dirty&33&&n&&t(1,a=n.title||`Conversation ${o}`)},[o,a,c,u,f,n,l,h,g]}class zn extends ae{constructor(e){super(),oe(this,e,$n,Tn,ee,{conversationId:0})}}function wt(s,e,t){const n=s.slice();return n[22]=e[t],n}function vt(s,e,t){const n=s.slice();return n[25]=e[t],n}function yt(s){let e,t=(s[25].display_name||s[25].name)+"",n,i;return{c(){e=k("option"),n=U(t),e.__value=i=s[25].id,X(e,e.__value)},m(l,r){B(l,e,r),p(e,n)},p(l,r){r&16&&t!==(t=(l[25].display_name||l[25].name)+"")&&G(n,t),r&16&&i!==(i=l[25].id)&&(e.__value=i,X(e,e.__value))},d(l){l&&M(e)}}}function xt(s){let e,t,n,i=(s[22].title||`Conversation ${s[22].id}`)+"",l,r,o,a=bt(s[22].created_at)+"",c,u,f,h,g,m,b,C,T;function I(){return s[14](s[22])}function w(){return s[15](s[22])}function v(){return s[16](s[22])}return{c(){e=k("div"),t=k("div"),n=k("div"),l=U(i),r=R(),o=k("div"),c=U(a),u=R(),f=k("div"),h=k("button"),h.textContent="‚úèÔ∏è",g=R(),m=k("button"),m.textContent="üóëÔ∏è",b=R(),d(n,"class","conversation-title svelte-5487mw"),d(o,"class","conversation-time svelte-5487mw"),d(t,"class","conversation-info svelte-5487mw"),d(h,"class","conversation-action-btn svelte-5487mw"),d(h,"title","Rename"),d(m,"class","conversation-action-btn delete svelte-5487mw"),d(m,"title","Delete"),d(f,"class","conversation-actions svelte-5487mw"),d(e,"class","conversation-item svelte-5487mw")},m(y,z){B(y,e,z),p(e,t),p(t,n),p(n,l),p(t,r),p(t,o),p(o,c),p(e,u),p(e,f),p(f,h),p(f,g),p(f,m),p(e,b),C||(T=[P(t,"click",I),P(h,"click",Ze(w)),P(m,"click",Ze(v))],C=!0)},p(y,z){s=y,z&64&&i!==(i=(s[22].title||`Conversation ${s[22].id}`)+"")&&G(l,i),z&64&&a!==(a=bt(s[22].created_at)+"")&&G(c,a)},d(y){y&&M(e),C=!1,Y(T)}}}function Tt(s){let e,t;return e=new xn({}),e.$on("close",s[17]),{c(){re(e.$$.fragment)},m(n,i){te(e,n,i),t=!0},p:H,i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){V(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function $t(s){let e,t;return e=new zn({props:{conversationId:s[3]}}),e.$on("close",s[18]),{c(){re(e.$$.fragment)},m(n,i){te(e,n,i),t=!0},p(n,i){const l={};i&8&&(l.conversationId=n[3]),e.$set(l)},i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){V(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function Cn(s){let e,t,n,i,l,r,o,a,c,u,f,h,g,m,b,C,T,I,w,v,y,z,j,S=ue(s[4]),_=[];for(let $=0;$<S.length;$+=1)_[$]=yt(vt(s,S,$));let N=ue(s[6]),x=[];for(let $=0;$<N.length;$+=1)x[$]=xt(wt(s,N,$));let A=s[1]&&Tt(s),E=s[2]&&$t(s);return{c(){e=k("aside"),t=k("div"),n=k("h2"),n.textContent="Transcribe",i=R(),l=k("button"),l.textContent="‚ò∞",r=R(),o=k("div"),a=k("select"),c=k("option"),c.textContent="Select Profile...";for(let $=0;$<_.length;$+=1)_[$].c();f=R(),h=k("button"),h.textContent="+ New Profile",g=R(),m=k("div"),b=k("button"),b.textContent="+ New Conversation",C=R(),T=k("div");for(let $=0;$<x.length;$+=1)x[$].c();I=R(),A&&A.c(),w=R(),E&&E.c(),v=Le(),d(n,"class","svelte-5487mw"),d(l,"class","sidebar-toggle svelte-5487mw"),d(l,"aria-label","Toggle sidebar"),d(t,"class","sidebar-header svelte-5487mw"),c.__value="",X(c,c.__value),d(a,"class","profile-select svelte-5487mw"),d(h,"class","btn-secondary svelte-5487mw"),d(o,"class","profile-section svelte-5487mw"),d(b,"class","btn-primary svelte-5487mw"),d(T,"class","conversations-list svelte-5487mw"),d(m,"class","sidebar-content svelte-5487mw"),d(e,"class","sidebar svelte-5487mw"),le(e,"collapsed",s[5])},m($,L){var J;B($,e,L),p(e,t),p(t,n),p(t,i),p(t,l),p(e,r),p(e,o),p(o,a),p(a,c);for(let Q=0;Q<_.length;Q+=1)_[Q]&&_[Q].m(a,null);He(a,(J=s[0])==null?void 0:J.id),p(o,f),p(o,h),p(e,g),p(e,m),p(m,b),p(m,C),p(m,T);for(let Q=0;Q<x.length;Q+=1)x[Q]&&x[Q].m(T,null);B($,I,L),A&&A.m($,L),B($,w,L),E&&E.m($,L),B($,v,L),y=!0,z||(j=[P(l,"click",s[7]),P(a,"change",s[8]),P(h,"click",s[13]),P(b,"click",s[9])],z=!0)},p($,[L]){var J,Q;if(L&16){S=ue($[4]);let q;for(q=0;q<S.length;q+=1){const he=vt($,S,q);_[q]?_[q].p(he,L):(_[q]=yt(he),_[q].c(),_[q].m(a,null))}for(;q<_.length;q+=1)_[q].d(1);_.length=S.length}if((!y||L&17&&u!==(u=(J=$[0])==null?void 0:J.id))&&He(a,(Q=$[0])==null?void 0:Q.id),L&7232){N=ue($[6]);let q;for(q=0;q<N.length;q+=1){const he=wt($,N,q);x[q]?x[q].p(he,L):(x[q]=xt(he),x[q].c(),x[q].m(T,null))}for(;q<x.length;q+=1)x[q].d(1);x.length=N.length}(!y||L&32)&&le(e,"collapsed",$[5]),$[1]?A?(A.p($,L),L&2&&Z(A,1)):(A=Tt($),A.c(),Z(A,1),A.m(w.parentNode,w)):A&&(Te(),V(A,1,1,()=>{A=null}),$e()),$[2]?E?(E.p($,L),L&4&&Z(E,1)):(E=$t($),E.c(),Z(E,1),E.m(v.parentNode,v)):E&&(Te(),V(E,1,1,()=>{E=null}),$e())},i($){y||(Z(A),Z(E),y=!0)},o($){V(A),V(E),y=!1},d($){$&&(M(e),M(I),M(w),M(v)),Ue(_,$),Ue(x,$),A&&A.d($),E&&E.d($),z=!1,Y(j)}}}function Sn(s,e,t){let n,i,l,r;ce(s,pe,S=>t(0,n=S)),ce(s,Ie,S=>t(4,i=S)),ce(s,kt,S=>t(5,l=S)),ce(s,Je,S=>t(6,r=S));const o=Ne();let a=!1,c=!1,u=null;me(()=>{const S=()=>{n&&g(n.id)};return window.addEventListener("refreshConversations",S),()=>{window.removeEventListener("refreshConversations",S)}});function f(){kt.update(S=>!S)}async function h(S){const _=parseInt(S.target.value);if(_){const N=i.find(x=>x.id===_);N&&(pe.set(N),localStorage.setItem("activeProfileId",_.toString()))}}async function g(S){try{const _=await K.get(`/conversations?profile_id=${S}`);Je.set(_||[])}catch(_){console.error("Failed to load conversations:",_)}}function m(){o("showUpload")}async function b(S){try{const _=await K.get(`/conversations/${S}`);ge.set(_),window.dispatchEvent(new CustomEvent("message",{detail:{type:"loadConversation",conversationId:S}}))}catch(_){console.error("Failed to load conversation:",_)}}function C(S){t(3,u=S),t(2,c=!0)}function T(S){confirm("Are you sure you want to delete this conversation?")&&K.delete(`/conversations/${S}`).then(()=>{g(n==null?void 0:n.id)}).catch(_=>{console.error("Failed to delete conversation:",_),alert("Failed to delete conversation: "+_.message)})}const I=()=>t(1,a=!0),w=S=>b(S.id),v=S=>C(S.id),y=S=>T(S.id),z=()=>t(1,a=!1),j=()=>{t(2,c=!1),t(3,u=null)};return s.$$.update=()=>{s.$$.dirty&1&&(n==null||n.id),s.$$.dirty&1&&n&&g(n.id)},[n,a,c,u,i,l,r,f,h,m,b,C,T,I,w,v,y,z,j]}class Rn extends ae{constructor(e){super(),oe(this,e,Sn,Cn,ee,{})}}function zt(s){let e,t,n,i,l,r,o,a,c,u,f,h,g,m,b,C;return{c(){e=k("div"),t=k("label"),n=k("input"),i=U(" Enable Speaker Diarization"),l=R(),r=k("label"),o=k("input"),a=U(" Generate Summary"),c=R(),u=k("label"),f=k("input"),h=U(" Generate Action Items"),g=R(),m=k("button"),m.textContent="Upload & Process",d(n,"type","checkbox"),d(n,"class","svelte-z4eamb"),d(t,"class","svelte-z4eamb"),d(o,"type","checkbox"),d(o,"class","svelte-z4eamb"),d(r,"class","svelte-z4eamb"),d(f,"type","checkbox"),d(f,"class","svelte-z4eamb"),d(u,"class","svelte-z4eamb"),d(m,"class","btn-primary"),d(e,"class","upload-options svelte-z4eamb")},m(T,I){B(T,e,I),p(e,t),p(t,n),n.checked=s[6],p(t,i),p(e,l),p(e,r),p(r,o),o.checked=s[7],p(r,a),p(e,c),p(e,u),p(u,f),f.checked=s[8],p(u,h),p(e,g),p(e,m),b||(C=[P(n,"change",s[16]),P(o,"change",s[17]),P(f,"change",s[18]),P(m,"click",s[13])],b=!0)},p(T,I){I&64&&(n.checked=T[6]),I&128&&(o.checked=T[7]),I&256&&(f.checked=T[8])},d(T){T&&M(e),b=!1,Y(C)}}}function Ct(s){let e,t,n,i,l,r;return{c(){e=k("div"),t=k("div"),n=k("div"),i=R(),l=k("p"),r=U(s[5]),d(n,"class","progress-fill svelte-z4eamb"),gt(n,"width",s[4]+"%"),d(t,"class","progress-bar svelte-z4eamb"),d(l,"class","svelte-z4eamb"),d(e,"class","upload-progress svelte-z4eamb")},m(o,a){B(o,e,a),p(e,t),p(t,n),p(e,i),p(e,l),p(l,r)},p(o,a){a&16&&gt(n,"width",o[4]+"%"),a&32&&G(r,o[5])},d(o){o&&M(e)}}}function In(s){let e,t,n,i,l,r,o,a,c,u,f,h,g,m,b,C,T,I,w=s[2]&&zt(s),v=s[3]&&Ct(s);return{c(){e=k("div"),t=k("div"),n=Be("svg"),i=Be("path"),l=Be("polyline"),r=Be("line"),o=R(),a=k("h3"),a.textContent="Upload Audio File",c=R(),u=k("p"),u.textContent="Drag and drop your audio file here, or click to browse",f=R(),h=k("input"),g=R(),m=k("button"),m.textContent="Browse Files",b=R(),w&&w.c(),C=R(),v&&v.c(),d(i,"d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"),d(l,"points","17 8 12 3 7 8"),d(r,"x1","12"),d(r,"y1","3"),d(r,"x2","12"),d(r,"y2","15"),d(n,"class","upload-icon svelte-z4eamb"),d(n,"viewBox","0 0 24 24"),d(n,"fill","none"),d(n,"stroke","currentColor"),d(n,"stroke-width","2"),d(a,"class","svelte-z4eamb"),d(u,"class","svelte-z4eamb"),d(h,"type","file"),d(h,"id","fileInput"),d(h,"accept","audio/*,.mp3,.m4a,.mp4,.ogg,.wav,.flac"),h.hidden=!0,d(m,"class","btn-primary"),d(t,"class","upload-zone svelte-z4eamb"),le(t,"dragover",s[1]),d(e,"class","upload-area svelte-z4eamb")},m(y,z){B(y,e,z),p(e,t),p(t,n),p(n,i),p(n,l),p(n,r),p(t,o),p(t,a),p(t,c),p(t,u),p(t,f),p(t,h),s[14](h),p(t,g),p(t,m),p(t,b),w&&w.m(t,null),p(t,C),v&&v.m(t,null),T||(I=[P(h,"change",s[12]),P(m,"click",s[15]),P(t,"dragover",s[9]),P(t,"dragleave",s[10]),P(t,"drop",s[11])],T=!0)},p(y,[z]){y[2]?w?w.p(y,z):(w=zt(y),w.c(),w.m(t,C)):w&&(w.d(1),w=null),y[3]?v?v.p(y,z):(v=Ct(y),v.c(),v.m(t,null)):v&&(v.d(1),v=null),z&2&&le(t,"dragover",y[1])},i:H,o:H,d(y){y&&M(e),s[14](null),w&&w.d(),v&&v.d(),T=!1,Y(I)}}}function En(s,e,t){let n;ce(s,pe,x=>t(20,n=x));const i=Ne();let l,r=!1,o=!1,a=!1,c=0,u="Processing...",f=null,h=!1,g=!1,m=!1;function b(x){x.preventDefault(),t(1,r=!0)}function C(){t(1,r=!1)}function T(x){x.preventDefault(),t(1,r=!1),x.dataTransfer.files.length>0&&w(x.dataTransfer.files[0])}function I(x){x.target.files.length>0&&w(x.target.files[0])}function w(x){const A=[".mp3",".m4a",".mp4",".ogg",".wav",".flac"],E="."+x.name.split(".").pop().toLowerCase();if(!A.includes(E)){alert("Unsupported file type. Please upload an audio file.");return}f=x,t(2,o=!0)}async function v(){if(!n){alert("Please select a profile first");return}if(!f){alert("Please select a file");return}const x=new FormData;x.append("file",f),x.append("profile_id",n.id),x.append("diarization",h),x.append("generate_summary",g),x.append("generate_action_items",m),t(2,o=!1),t(3,a=!0),t(4,c=0),t(5,u="Uploading file...");try{const A=await K.uploadFile(x,E=>{t(4,c=E),t(5,u=`Uploading file... ${E}%`)});t(4,c=10),t(5,u="Upload complete. Initializing processing..."),A.status==="processing"&&A.conversation_id?y(A.conversation_id):A.conversation_id&&(i("conversationReady",{conversationId:A.conversation_id}),t(3,a=!1))}catch(A){alert(A.message||"Upload failed"),t(3,a=!1)}}async function y(x){let E=0;const $=async()=>{try{const L=await K.get(`/conversations/${x}/job`);if(t(4,c=Math.max(L.progress||0,L.status==="processing"?10:0)),L.status==="completed"){t(5,u="Processing complete!"),t(4,c=100),setTimeout(()=>{i("conversationReady",{conversationId:x}),t(3,a=!1),window.dispatchEvent(new CustomEvent("refreshConversations"))},500);return}else if(L.status==="failed"){t(5,u=`Processing failed: ${L.error||"Unknown error"}`),alert(`Processing failed: ${L.error||"Unknown error"}`),t(3,a=!1);return}else L.status==="pending"?(t(5,u="Waiting for processing to start..."),t(4,c=10)):L.total_chunks&&L.current_chunk!==null&&L.current_chunk!==void 0?t(5,u=`Processing chunk ${L.current_chunk} of ${L.total_chunks}... (${c}%)`):c<15?t(5,u=`Preparing audio... (${c}%)`):c<85?t(5,u=`Transcribing audio... (${c}%)`):c<100?t(5,u=`Finalizing transcript${g||m?" and generating content":""}... (${c}%)`):t(5,u=`Processing... (${c}%)`);E++,E<300?setTimeout($,1e3):t(5,u="Processing is taking longer than expected. Please check back later.")}catch(L){console.error("Polling error:",L),E++,E<300?setTimeout($,2e3):t(5,u="Error checking processing status. Please refresh the page.")}};$()}function z(x){Qe[x?"unshift":"push"](()=>{l=x,t(0,l)})}const j=()=>l==null?void 0:l.click();function S(){h=this.checked,t(6,h)}function _(){g=this.checked,t(7,g)}function N(){m=this.checked,t(8,m)}return[l,r,o,a,c,u,h,g,m,b,C,T,I,v,z,j,S,_,N]}class Vt extends ae{constructor(e){super(),oe(this,e,En,In,ee,{})}}function Pn(s){let e,t,n,i,l,r=s[1]?"‚è∏":"‚ñ∂",o,a,c,u=fe(s[2])+"",f,h,g,m,b,C,T=fe(s[3])+"",I,w,v,y,z,j,S,_,N,x,A,E,$,L;return{c(){e=k("div"),t=k("audio"),n=R(),i=k("div"),l=k("button"),o=U(r),a=R(),c=k("span"),f=U(u),h=R(),g=k("input"),b=R(),C=k("span"),I=U(T),w=R(),v=k("select"),y=k("option"),y.textContent="0.5x",z=k("option"),z.textContent="1x",j=k("option"),j.textContent="1.25x",S=k("option"),S.textContent="1.5x",_=k("option"),_.textContent="2x",N=R(),x=k("label"),x.textContent="Volume:",A=R(),E=k("input"),d(t,"class","svelte-7jn3j0"),d(l,"class","control-btn svelte-7jn3j0"),d(g,"type","range"),d(g,"min","0"),d(g,"max",m=s[3]||100),g.value=s[2],d(g,"class","seek-bar svelte-7jn3j0"),y.__value=.5,X(y,y.__value),z.__value=1,X(z,z.__value),j.__value=1.25,X(j,j.__value),S.__value=1.5,X(S,S.__value),_.__value=2,X(_,_.__value),d(v,"class","speed-select svelte-7jn3j0"),s[4]===void 0&&Ve(()=>s[13].call(v)),d(x,"for","volumeControl"),d(x,"class","volume-label svelte-7jn3j0"),d(E,"type","range"),d(E,"id","volumeControl"),d(E,"min","0"),d(E,"max","100"),E.value=s[5],d(E,"class","volume-slider svelte-7jn3j0"),d(i,"class","audio-controls svelte-7jn3j0"),d(e,"class","audio-player-container svelte-7jn3j0")},m(J,Q){B(J,e,Q),p(e,t),s[12](t),p(e,n),p(e,i),p(i,l),p(l,o),p(i,a),p(i,c),p(c,f),p(i,h),p(i,g),p(i,b),p(i,C),p(C,I),p(i,w),p(i,v),p(v,y),p(v,z),p(v,j),p(v,S),p(v,_),He(v,s[4],!0),p(i,N),p(i,x),p(i,A),p(i,E),$||(L=[P(l,"click",s[6]),P(g,"mousedown",s[7]),P(g,"mouseup",s[8]),P(g,"touchstart",s[7],{passive:!0}),P(g,"touchend",s[8]),P(g,"change",s[8]),P(v,"change",s[13]),P(v,"change",s[9]),P(E,"input",s[10])],$=!0)},p(J,[Q]){Q&2&&r!==(r=J[1]?"‚è∏":"‚ñ∂")&&G(o,r),Q&4&&u!==(u=fe(J[2])+"")&&G(f,u),Q&8&&m!==(m=J[3]||100)&&d(g,"max",m),Q&4&&(g.value=J[2]),Q&8&&T!==(T=fe(J[3])+"")&&G(I,T),Q&16&&He(v,J[4]),Q&32&&(E.value=J[5])},i:H,o:H,d(J){J&&M(e),s[12](null),$=!1,Y(L)}}}function An(s,e,t){let n;ce(s,tt,z=>t(16,n=z));let{conversationId:i}=e,l,r=!1,o=0,a=0,c=1,u=100,f=!1,h=null;me(()=>{l&&(t(0,l.src=`/api/audio/${i}`,l),g())}),dn(()=>{l&&l.pause()});function g(){t(0,l.playbackRate=1,l),l.addEventListener("loadedmetadata",()=>{t(3,a=l.duration),t(0,l.playbackRate=1,l)}),l.addEventListener("timeupdate",()=>{f||(t(2,o=l.currentTime),w(l.currentTime))}),l.addEventListener("ended",()=>{t(1,r=!1)})}function m(){l.paused?(l.play(),t(1,r=!0)):(l.pause(),t(1,r=!1))}function b(){f=!0}function C(z){f&&(t(2,o=parseFloat(z.target.value)),t(0,l.currentTime=o,l),w(o),f=!1)}function T(z){t(4,c=parseFloat(z.target.value)),t(0,l.playbackRate=c,l)}function I(z){t(5,u=z.target.value),t(0,l.volume=u/100,l)}function w(z){const j=n;if(!j||j.length===0)return;const S=.1;let _=null;for(let N=0;N<j.length;N++){const x=j[N];if(z>=x.start_time&&z<x.end_time+S){_=N;break}}if(_!==null){const N=`segment-${_}`,x=document.getElementById(N);if(x&&N!==h){if(h){const E=document.getElementById(h);E&&E.classList.remove("active")}x.classList.add("active"),h=N;const A=document.querySelector(".transcript-content");if(A){const E=A.getBoundingClientRect(),$=x.getBoundingClientRect();if(!($.top>=E.top&&$.bottom<=E.bottom)){const J=x.offsetTop,Q=A.clientHeight,q=x.offsetHeight,he=J-Q/2+q/2;A.scrollTo({top:he,behavior:"smooth"})}}}}}function v(z){Qe[z?"unshift":"push"](()=>{l=z,t(0,l)})}function y(){c=pn(this),t(4,c)}return s.$$set=z=>{"conversationId"in z&&t(11,i=z.conversationId)},[l,r,o,a,c,u,m,b,C,T,I,i,v,y]}class Ln extends ae{constructor(e){super(),oe(this,e,An,Pn,ee,{conversationId:11})}}function St(s,e,t){const n=s.slice();return n[3]=e[t],n[5]=t,n}function Nn(s){let e;return{c(){e=k("p"),e.textContent="No transcript available."},m(t,n){B(t,e,n)},p:H,d(t){t&&M(e)}}}function jn(s){let e,t=s[0].transcript.transcript_text+"",n;return{c(){e=k("p"),n=U(t)},m(i,l){B(i,e,l),p(e,n)},p(i,l){l&1&&t!==(t=i[0].transcript.transcript_text+"")&&G(n,t)},d(i){i&&M(e)}}}function Dn(s){let e,t=ue(s[1]),n=[];for(let i=0;i<t.length;i+=1)n[i]=It(St(s,t,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=Le()},m(i,l){for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(i,l);B(i,e,l)},p(i,l){if(l&2){t=ue(i[1]);let r;for(r=0;r<t.length;r+=1){const o=St(i,t,r);n[r]?n[r].p(o,l):(n[r]=It(o),n[r].c(),n[r].m(e.parentNode,e))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}},d(i){i&&M(e),Ue(n,i)}}}function Rt(s){let e,t,n=s[3].speaker_label+"",i,l;return{c(){e=k("span"),t=U("["),i=U(n),l=U("]"),d(e,"class","speaker-label svelte-iis6p9")},m(r,o){B(r,e,o),p(e,t),p(e,i),p(e,l)},p(r,o){o&2&&n!==(n=r[3].speaker_label+"")&&G(i,n)},d(r){r&&M(e)}}}function It(s){let e,t,n,i,l=fe(s[3].start_time)+"",r,o,a=fe(s[3].end_time)+"",c,u,f,h=s[3].text+"",g,m,b,C,T=s[3].speaker_label&&Rt(s);return{c(){e=k("div"),t=k("div"),T&&T.c(),n=R(),i=k("span"),r=U(l),o=U(" - "),c=U(a),u=R(),f=k("div"),g=U(h),m=R(),d(i,"class","timestamp svelte-iis6p9"),d(t,"class","segment-header svelte-iis6p9"),d(f,"class","segment-text svelte-iis6p9"),d(e,"class","transcript-segment svelte-iis6p9"),d(e,"id","segment-"+s[5]),d(e,"data-start-time",b=s[3].start_time),d(e,"data-end-time",C=s[3].end_time)},m(I,w){B(I,e,w),p(e,t),T&&T.m(t,null),p(t,n),p(t,i),p(i,r),p(i,o),p(i,c),p(e,u),p(e,f),p(f,g),p(e,m)},p(I,w){I[3].speaker_label?T?T.p(I,w):(T=Rt(I),T.c(),T.m(t,n)):T&&(T.d(1),T=null),w&2&&l!==(l=fe(I[3].start_time)+"")&&G(r,l),w&2&&a!==(a=fe(I[3].end_time)+"")&&G(c,a),w&2&&h!==(h=I[3].text+"")&&G(g,h),w&2&&b!==(b=I[3].start_time)&&d(e,"data-start-time",b),w&2&&C!==(C=I[3].end_time)&&d(e,"data-end-time",C)},d(I){I&&M(e),T&&T.d()}}}function Mn(s){let e;function t(l,r){var o,a;return l[1].length>0?Dn:(a=(o=l[0])==null?void 0:o.transcript)!=null&&a.transcript_text?jn:Nn}let n=t(s),i=n(s);return{c(){e=k("div"),i.c(),d(e,"class","transcript-content svelte-iis6p9")},m(l,r){B(l,e,r),i.m(e,null)},p(l,[r]){n===(n=t(l))&&i?i.p(l,r):(i.d(1),i=n(l),i&&(i.c(),i.m(e,null)))},i:H,o:H,d(l){l&&M(e),i.d()}}}function Bn(s,e,t){let{conversation:n}=e,i=[];me(async()=>{n!=null&&n.transcript&&await l()});async function l(){var r;if((r=n==null?void 0:n.transcript)!=null&&r.segments)t(1,i=n.transcript.segments),tt.set(i);else if(n!=null&&n.id)try{const o=await K.get(`/conversations/${n.id}/transcript/segments`);o&&(t(1,i=o),tt.set(i))}catch(o){console.error("Failed to load segments:",o)}}return s.$$set=r=>{"conversation"in r&&t(0,n=r.conversation)},s.$$.update=()=>{s.$$.dirty&1&&n!=null&&n.transcript&&l()},[n,i]}class Fn extends ae{constructor(e){super(),oe(this,e,Bn,Mn,ee,{conversation:0})}}function lt(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let _e=lt();function Jt(s){_e=s}const Gt=/[&<>"']/,qn=new RegExp(Gt.source,"g"),Xt=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,On=new RegExp(Xt.source,"g"),Un={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Et=s=>Un[s];function W(s,e){if(e){if(Gt.test(s))return s.replace(qn,Et)}else if(Xt.test(s))return s.replace(On,Et);return s}const Zn=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function Hn(s){return s.replace(Zn,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const Qn=/(^|[^\[])\^/g;function F(s,e){let t=typeof s=="string"?s:s.source;e=e||"";const n={replace:(i,l)=>{let r=typeof l=="string"?l:l.source;return r=r.replace(Qn,"$1"),t=t.replace(i,r),n},getRegex:()=>new RegExp(t,e)};return n}function Pt(s){try{s=encodeURI(s).replace(/%25/g,"%")}catch{return null}return s}const Ee={exec:()=>null};function At(s,e){const t=s.replace(/\|/g,(l,r,o)=>{let a=!1,c=r;for(;--c>=0&&o[c]==="\\";)a=!a;return a?"|":" |"}),n=t.split(/ \|/);let i=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),e)if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(/\\\|/g,"|");return n}function Fe(s,e,t){const n=s.length;if(n===0)return"";let i=0;for(;i<n&&s.charAt(n-i-1)===e;)i++;return s.slice(0,n-i)}function Vn(s,e){if(s.indexOf(e[1])===-1)return-1;let t=0;for(let n=0;n<s.length;n++)if(s[n]==="\\")n++;else if(s[n]===e[0])t++;else if(s[n]===e[1]&&(t--,t<0))return n;return-1}function Lt(s,e,t,n){const i=e.href,l=e.title?W(e.title):null,r=s[1].replace(/\\([\[\]])/g,"$1");if(s[0].charAt(0)!=="!"){n.state.inLink=!0;const o={type:"link",raw:t,href:i,title:l,text:r,tokens:n.inlineTokens(r)};return n.state.inLink=!1,o}return{type:"image",raw:t,href:i,title:l,text:W(r)}}function Jn(s,e){const t=s.match(/^(\s+)(?:```)/);if(t===null)return e;const n=t[1];return e.split(`
`).map(i=>{const l=i.match(/^\s+/);if(l===null)return i;const[r]=l;return r.length>=n.length?i.slice(n.length):i}).join(`
`)}class Ge{constructor(e){O(this,"options");O(this,"rules");O(this,"lexer");this.options=e||_e}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const n=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Fe(n,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const n=t[0],i=Jn(n,t[3]||"");return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(/#$/.test(n)){const i=Fe(n,"#");(this.options.pedantic||!i||/ $/.test(i))&&(n=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const n=Fe(t[0].replace(/^ *>[ \t]?/gm,""),`
`),i=this.lexer.state.top;this.lexer.state.top=!0;const l=this.lexer.blockTokens(n);return this.lexer.state.top=i,{type:"blockquote",raw:t[0],tokens:l,text:n}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim();const i=n.length>1,l={type:"list",raw:"",ordered:i,start:i?+n.slice(0,-1):"",loose:!1,items:[]};n=i?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=i?n:"[*+-]");const r=new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`);let o="",a="",c=!1;for(;e;){let u=!1;if(!(t=r.exec(e))||this.rules.block.hr.test(e))break;o=t[0],e=e.substring(o.length);let f=t[2].split(`
`,1)[0].replace(/^\t+/,T=>" ".repeat(3*T.length)),h=e.split(`
`,1)[0],g=0;this.options.pedantic?(g=2,a=f.trimStart()):(g=t[2].search(/[^ ]/),g=g>4?1:g,a=f.slice(g),g+=t[1].length);let m=!1;if(!f&&/^ *$/.test(h)&&(o+=h+`
`,e=e.substring(h.length+1),u=!0),!u){const T=new RegExp(`^ {0,${Math.min(3,g-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),I=new RegExp(`^ {0,${Math.min(3,g-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),w=new RegExp(`^ {0,${Math.min(3,g-1)}}(?:\`\`\`|~~~)`),v=new RegExp(`^ {0,${Math.min(3,g-1)}}#`);for(;e;){const y=e.split(`
`,1)[0];if(h=y,this.options.pedantic&&(h=h.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),w.test(h)||v.test(h)||T.test(h)||I.test(e))break;if(h.search(/[^ ]/)>=g||!h.trim())a+=`
`+h.slice(g);else{if(m||f.search(/[^ ]/)>=4||w.test(f)||v.test(f)||I.test(f))break;a+=`
`+h}!m&&!h.trim()&&(m=!0),o+=y+`
`,e=e.substring(y.length+1),f=h.slice(g)}}l.loose||(c?l.loose=!0:/\n *\n *$/.test(o)&&(c=!0));let b=null,C;this.options.gfm&&(b=/^\[[ xX]\] /.exec(a),b&&(C=b[0]!=="[ ] ",a=a.replace(/^\[[ xX]\] +/,""))),l.items.push({type:"list_item",raw:o,task:!!b,checked:C,loose:!1,text:a,tokens:[]}),l.raw+=o}l.items[l.items.length-1].raw=o.trimEnd(),l.items[l.items.length-1].text=a.trimEnd(),l.raw=l.raw.trimEnd();for(let u=0;u<l.items.length;u++)if(this.lexer.state.top=!1,l.items[u].tokens=this.lexer.blockTokens(l.items[u].text,[]),!l.loose){const f=l.items[u].tokens.filter(g=>g.type==="space"),h=f.length>0&&f.some(g=>/\n.*\n/.test(g.raw));l.loose=h}if(l.loose)for(let u=0;u<l.items.length;u++)l.items[u].loose=!0;return l}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const n=t[1].toLowerCase().replace(/\s+/g," "),i=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",l=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:i,title:l}}}table(e){const t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;const n=At(t[1]),i=t[2].replace(/^\||\| *$/g,"").split("|"),l=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],r={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===i.length){for(const o of i)/^ *-+: *$/.test(o)?r.align.push("right"):/^ *:-+: *$/.test(o)?r.align.push("center"):/^ *:-+ *$/.test(o)?r.align.push("left"):r.align.push(null);for(const o of n)r.header.push({text:o,tokens:this.lexer.inline(o)});for(const o of l)r.rows.push(At(o,r.header.length).map(a=>({text:a,tokens:this.lexer.inline(a)})));return r}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:W(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const n=t[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;const r=Fe(n.slice(0,-1),"\\");if((n.length-r.length)%2===0)return}else{const r=Vn(t[2],"()");if(r>-1){const a=(t[0].indexOf("!")===0?5:4)+t[1].length+r;t[2]=t[2].substring(0,r),t[0]=t[0].substring(0,a).trim(),t[3]=""}}let i=t[2],l="";if(this.options.pedantic){const r=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);r&&(i=r[1],l=r[3])}else l=t[3]?t[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(n)?i=i.slice(1):i=i.slice(1,-1)),Lt(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:l&&l.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){const i=(n[2]||n[1]).replace(/\s+/g," "),l=t[i.toLowerCase()];if(!l){const r=n[0].charAt(0);return{type:"text",raw:r,text:r}}return Lt(n,l,n[0],this.lexer)}}emStrong(e,t,n=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!i||i[3]&&n.match(/[\p{L}\p{N}]/u))return;if(!(i[1]||i[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const r=[...i[0]].length-1;let o,a,c=r,u=0;const f=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(f.lastIndex=0,t=t.slice(-1*e.length+r);(i=f.exec(t))!=null;){if(o=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!o)continue;if(a=[...o].length,i[3]||i[4]){c+=a;continue}else if((i[5]||i[6])&&r%3&&!((r+a)%3)){u+=a;continue}if(c-=a,c>0)continue;a=Math.min(a,a+c+u);const h=[...i[0]][0].length,g=e.slice(0,r+i.index+h+a);if(Math.min(r,a)%2){const b=g.slice(1,-1);return{type:"em",raw:g,text:b,tokens:this.lexer.inlineTokens(b)}}const m=g.slice(2,-2);return{type:"strong",raw:g,text:m,tokens:this.lexer.inlineTokens(m)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(/\n/g," ");const i=/[^ ]/.test(n),l=/^ /.test(n)&&/ $/.test(n);return i&&l&&(n=n.substring(1,n.length-1)),n=W(n,!0),{type:"codespan",raw:t[0],text:n}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let n,i;return t[2]==="@"?(n=W(t[1]),i="mailto:"+n):(n=W(t[1]),i=n),{type:"link",raw:t[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}url(e){var n;let t;if(t=this.rules.inline.url.exec(e)){let i,l;if(t[2]==="@")i=W(t[0]),l="mailto:"+i;else{let r;do r=t[0],t[0]=((n=this.rules.inline._backpedal.exec(t[0]))==null?void 0:n[0])??"";while(r!==t[0]);i=W(t[0]),t[1]==="www."?l="http://"+t[0]:l=t[0]}return{type:"link",raw:t[0],text:i,href:l,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let n;return this.lexer.state.inRawBlock?n=t[0]:n=W(t[0]),{type:"text",raw:t[0],text:n}}}}const Gn=/^(?: *(?:\n|$))+/,Xn=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,Wn=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,je=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Kn=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Wt=/(?:[*+-]|\d{1,9}[.)])/,Kt=F(/^(?!bull )((?:.|\n(?!\s*?\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Wt).getRegex(),rt=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Yn=/^[^\n]+/,ot=/(?!\s*\])(?:\\.|[^\[\]\\])+/,es=F(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",ot).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),ts=F(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Wt).getRegex(),Ke="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",at=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,ns=F("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",at).replace("tag",Ke).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Yt=F(rt).replace("hr",je).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ke).getRegex(),ss=F(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Yt).getRegex(),ct={blockquote:ss,code:Xn,def:es,fences:Wn,heading:Kn,hr:je,html:ns,lheading:Kt,list:ts,newline:Gn,paragraph:Yt,table:Ee,text:Yn},Nt=F("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",je).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ke).getRegex(),is={...ct,table:Nt,paragraph:F(rt).replace("hr",je).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Nt).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ke).getRegex()},ls={...ct,html:F(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",at).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ee,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:F(rt).replace("hr",je).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Kt).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},en=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,rs=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,tn=/^( {2,}|\\)\n(?!\s*$)/,os=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,De="\\p{P}$+<=>`^|~",as=F(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,De).getRegex(),cs=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,us=F(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,De).getRegex(),fs=F("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,De).getRegex(),ps=F("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,De).getRegex(),hs=F(/\\([punct])/,"gu").replace(/punct/g,De).getRegex(),ds=F(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),gs=F(at).replace("(?:-->|$)","-->").getRegex(),ms=F("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",gs).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Xe=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,ks=F(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Xe).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),nn=F(/^!?\[(label)\]\[(ref)\]/).replace("label",Xe).replace("ref",ot).getRegex(),sn=F(/^!?\[(ref)\](?:\[\])?/).replace("ref",ot).getRegex(),bs=F("reflink|nolink(?!\\()","g").replace("reflink",nn).replace("nolink",sn).getRegex(),ut={_backpedal:Ee,anyPunctuation:hs,autolink:ds,blockSkip:cs,br:tn,code:rs,del:Ee,emStrongLDelim:us,emStrongRDelimAst:fs,emStrongRDelimUnd:ps,escape:en,link:ks,nolink:sn,punctuation:as,reflink:nn,reflinkSearch:bs,tag:ms,text:os,url:Ee},_s={...ut,link:F(/^!?\[(label)\]\((.*?)\)/).replace("label",Xe).getRegex(),reflink:F(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Xe).getRegex()},nt={...ut,escape:F(en).replace("])","~|])").getRegex(),url:F(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},ws={...nt,br:F(tn).replace("{2,}","*").getRegex(),text:F(nt.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},qe={normal:ct,gfm:is,pedantic:ls},Se={normal:ut,gfm:nt,breaks:ws,pedantic:_s};class se{constructor(e){O(this,"tokens");O(this,"options");O(this,"state");O(this,"tokenizer");O(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||_e,this.options.tokenizer=this.options.tokenizer||new Ge,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:qe.normal,inline:Se.normal};this.options.pedantic?(t.block=qe.pedantic,t.inline=Se.pedantic):this.options.gfm&&(t.block=qe.gfm,this.options.breaks?t.inline=Se.breaks:t.inline=Se.gfm),this.tokenizer.rules=t}static get rules(){return{block:qe,inline:Se}}static lex(e,t){return new se(t).lex(e)}static lexInline(e,t){return new se(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const n=this.inlineQueue[t];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(o,a,c)=>a+"    ".repeat(c.length));let n,i,l,r;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(o=>(n=o.call({lexer:this},e,t))?(e=e.substring(n.raw.length),t.push(n),!0):!1))){if(n=this.tokenizer.space(e)){e=e.substring(n.raw.length),n.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(n);continue}if(n=this.tokenizer.code(e)){e=e.substring(n.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(n);continue}if(n=this.tokenizer.fences(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.heading(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.hr(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.blockquote(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.list(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.html(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.def(e)){e=e.substring(n.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+n.raw,i.text+=`
`+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if(n=this.tokenizer.table(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.lheading(e)){e=e.substring(n.raw.length),t.push(n);continue}if(l=e,this.options.extensions&&this.options.extensions.startBlock){let o=1/0;const a=e.slice(1);let c;this.options.extensions.startBlock.forEach(u=>{c=u.call({lexer:this},a),typeof c=="number"&&c>=0&&(o=Math.min(o,c))}),o<1/0&&o>=0&&(l=e.substring(0,o+1))}if(this.state.top&&(n=this.tokenizer.paragraph(l))){i=t[t.length-1],r&&i.type==="paragraph"?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(n),r=l.length!==e.length,e=e.substring(n.raw.length);continue}if(n=this.tokenizer.text(e)){e=e.substring(n.raw.length),i=t[t.length-1],i&&i.type==="text"?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(n);continue}if(e){const o="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let n,i,l,r=e,o,a,c;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(o=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)u.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(o=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(o=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,o.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(a||(c=""),a=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(n=u.call({lexer:this},e,t))?(e=e.substring(n.raw.length),t.push(n),!0):!1))){if(n=this.tokenizer.escape(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.tag(e)){e=e.substring(n.raw.length),i=t[t.length-1],i&&n.type==="text"&&i.type==="text"?(i.raw+=n.raw,i.text+=n.text):t.push(n);continue}if(n=this.tokenizer.link(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(n.raw.length),i=t[t.length-1],i&&n.type==="text"&&i.type==="text"?(i.raw+=n.raw,i.text+=n.text):t.push(n);continue}if(n=this.tokenizer.emStrong(e,r,c)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.codespan(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.br(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.del(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.autolink(e)){e=e.substring(n.raw.length),t.push(n);continue}if(!this.state.inLink&&(n=this.tokenizer.url(e))){e=e.substring(n.raw.length),t.push(n);continue}if(l=e,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const f=e.slice(1);let h;this.options.extensions.startInline.forEach(g=>{h=g.call({lexer:this},f),typeof h=="number"&&h>=0&&(u=Math.min(u,h))}),u<1/0&&u>=0&&(l=e.substring(0,u+1))}if(n=this.tokenizer.inlineText(l)){e=e.substring(n.raw.length),n.raw.slice(-1)!=="_"&&(c=n.raw.slice(-1)),a=!0,i=t[t.length-1],i&&i.type==="text"?(i.raw+=n.raw,i.text+=n.text):t.push(n);continue}if(e){const u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return t}}class We{constructor(e){O(this,"options");this.options=e||_e}code(e,t,n){var l;const i=(l=(t||"").match(/^\S*/))==null?void 0:l[0];return e=e.replace(/\n$/,"")+`
`,i?'<pre><code class="language-'+W(i)+'">'+(n?e:W(e,!0))+`</code></pre>
`:"<pre><code>"+(n?e:W(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e,t){return e}heading(e,t,n){return`<h${t}>${e}</h${t}>
`}hr(){return`<hr>
`}list(e,t,n){const i=t?"ol":"ul",l=t&&n!==1?' start="'+n+'"':"";return"<"+i+l+`>
`+e+"</"+i+`>
`}listitem(e,t,n){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>
`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,t){const n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,t,n){const i=Pt(e);if(i===null)return n;e=i;let l='<a href="'+e+'"';return t&&(l+=' title="'+t+'"'),l+=">"+n+"</a>",l}image(e,t,n){const i=Pt(e);if(i===null)return n;e=i;let l=`<img src="${e}" alt="${n}"`;return t&&(l+=` title="${t}"`),l+=">",l}text(e){return e}}class ft{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,n){return""+n}image(e,t,n){return""+n}br(){return""}}class ie{constructor(e){O(this,"options");O(this,"renderer");O(this,"textRenderer");this.options=e||_e,this.options.renderer=this.options.renderer||new We,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new ft}static parse(e,t){return new ie(t).parse(e)}static parseInline(e,t){return new ie(t).parseInline(e)}parse(e,t=!0){let n="";for(let i=0;i<e.length;i++){const l=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[l.type]){const r=l,o=this.options.extensions.renderers[r.type].call({parser:this},r);if(o!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(r.type)){n+=o||"";continue}}switch(l.type){case"space":continue;case"hr":{n+=this.renderer.hr();continue}case"heading":{const r=l;n+=this.renderer.heading(this.parseInline(r.tokens),r.depth,Hn(this.parseInline(r.tokens,this.textRenderer)));continue}case"code":{const r=l;n+=this.renderer.code(r.text,r.lang,!!r.escaped);continue}case"table":{const r=l;let o="",a="";for(let u=0;u<r.header.length;u++)a+=this.renderer.tablecell(this.parseInline(r.header[u].tokens),{header:!0,align:r.align[u]});o+=this.renderer.tablerow(a);let c="";for(let u=0;u<r.rows.length;u++){const f=r.rows[u];a="";for(let h=0;h<f.length;h++)a+=this.renderer.tablecell(this.parseInline(f[h].tokens),{header:!1,align:r.align[h]});c+=this.renderer.tablerow(a)}n+=this.renderer.table(o,c);continue}case"blockquote":{const r=l,o=this.parse(r.tokens);n+=this.renderer.blockquote(o);continue}case"list":{const r=l,o=r.ordered,a=r.start,c=r.loose;let u="";for(let f=0;f<r.items.length;f++){const h=r.items[f],g=h.checked,m=h.task;let b="";if(h.task){const C=this.renderer.checkbox(!!g);c?h.tokens.length>0&&h.tokens[0].type==="paragraph"?(h.tokens[0].text=C+" "+h.tokens[0].text,h.tokens[0].tokens&&h.tokens[0].tokens.length>0&&h.tokens[0].tokens[0].type==="text"&&(h.tokens[0].tokens[0].text=C+" "+h.tokens[0].tokens[0].text)):h.tokens.unshift({type:"text",text:C+" "}):b+=C+" "}b+=this.parse(h.tokens,c),u+=this.renderer.listitem(b,m,!!g)}n+=this.renderer.list(u,o,a);continue}case"html":{const r=l;n+=this.renderer.html(r.text,r.block);continue}case"paragraph":{const r=l;n+=this.renderer.paragraph(this.parseInline(r.tokens));continue}case"text":{let r=l,o=r.tokens?this.parseInline(r.tokens):r.text;for(;i+1<e.length&&e[i+1].type==="text";)r=e[++i],o+=`
`+(r.tokens?this.parseInline(r.tokens):r.text);n+=t?this.renderer.paragraph(o):o;continue}default:{const r='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(r),"";throw new Error(r)}}}return n}parseInline(e,t){t=t||this.renderer;let n="";for(let i=0;i<e.length;i++){const l=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[l.type]){const r=this.options.extensions.renderers[l.type].call({parser:this},l);if(r!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(l.type)){n+=r||"";continue}}switch(l.type){case"escape":{const r=l;n+=t.text(r.text);break}case"html":{const r=l;n+=t.html(r.text);break}case"link":{const r=l;n+=t.link(r.href,r.title,this.parseInline(r.tokens,t));break}case"image":{const r=l;n+=t.image(r.href,r.title,r.text);break}case"strong":{const r=l;n+=t.strong(this.parseInline(r.tokens,t));break}case"em":{const r=l;n+=t.em(this.parseInline(r.tokens,t));break}case"codespan":{const r=l;n+=t.codespan(r.text);break}case"br":{n+=t.br();break}case"del":{const r=l;n+=t.del(this.parseInline(r.tokens,t));break}case"text":{const r=l;n+=t.text(r.text);break}default:{const r='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(r),"";throw new Error(r)}}}return n}}class Pe{constructor(e){O(this,"options");this.options=e||_e}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}}O(Pe,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var be,st,ln;class vs{constructor(...e){ht(this,be);O(this,"defaults",lt());O(this,"options",this.setOptions);O(this,"parse",Me(this,be,st).call(this,se.lex,ie.parse));O(this,"parseInline",Me(this,be,st).call(this,se.lexInline,ie.parseInline));O(this,"Parser",ie);O(this,"Renderer",We);O(this,"TextRenderer",ft);O(this,"Lexer",se);O(this,"Tokenizer",Ge);O(this,"Hooks",Pe);this.use(...e)}walkTokens(e,t){var i,l;let n=[];for(const r of e)switch(n=n.concat(t.call(this,r)),r.type){case"table":{const o=r;for(const a of o.header)n=n.concat(this.walkTokens(a.tokens,t));for(const a of o.rows)for(const c of a)n=n.concat(this.walkTokens(c.tokens,t));break}case"list":{const o=r;n=n.concat(this.walkTokens(o.items,t));break}default:{const o=r;(l=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&l[o.type]?this.defaults.extensions.childTokens[o.type].forEach(a=>{const c=o[a].flat(1/0);n=n.concat(this.walkTokens(c,t))}):o.tokens&&(n=n.concat(this.walkTokens(o.tokens,t)))}}return n}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{const i={...n};if(i.async=this.defaults.async||i.async||!1,n.extensions&&(n.extensions.forEach(l=>{if(!l.name)throw new Error("extension name required");if("renderer"in l){const r=t.renderers[l.name];r?t.renderers[l.name]=function(...o){let a=l.renderer.apply(this,o);return a===!1&&(a=r.apply(this,o)),a}:t.renderers[l.name]=l.renderer}if("tokenizer"in l){if(!l.level||l.level!=="block"&&l.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const r=t[l.level];r?r.unshift(l.tokenizer):t[l.level]=[l.tokenizer],l.start&&(l.level==="block"?t.startBlock?t.startBlock.push(l.start):t.startBlock=[l.start]:l.level==="inline"&&(t.startInline?t.startInline.push(l.start):t.startInline=[l.start]))}"childTokens"in l&&l.childTokens&&(t.childTokens[l.name]=l.childTokens)}),i.extensions=t),n.renderer){const l=this.defaults.renderer||new We(this.defaults);for(const r in n.renderer){if(!(r in l))throw new Error(`renderer '${r}' does not exist`);if(r==="options")continue;const o=r,a=n.renderer[o],c=l[o];l[o]=(...u)=>{let f=a.apply(l,u);return f===!1&&(f=c.apply(l,u)),f||""}}i.renderer=l}if(n.tokenizer){const l=this.defaults.tokenizer||new Ge(this.defaults);for(const r in n.tokenizer){if(!(r in l))throw new Error(`tokenizer '${r}' does not exist`);if(["options","rules","lexer"].includes(r))continue;const o=r,a=n.tokenizer[o],c=l[o];l[o]=(...u)=>{let f=a.apply(l,u);return f===!1&&(f=c.apply(l,u)),f}}i.tokenizer=l}if(n.hooks){const l=this.defaults.hooks||new Pe;for(const r in n.hooks){if(!(r in l))throw new Error(`hook '${r}' does not exist`);if(r==="options")continue;const o=r,a=n.hooks[o],c=l[o];Pe.passThroughHooks.has(r)?l[o]=u=>{if(this.defaults.async)return Promise.resolve(a.call(l,u)).then(h=>c.call(l,h));const f=a.call(l,u);return c.call(l,f)}:l[o]=(...u)=>{let f=a.apply(l,u);return f===!1&&(f=c.apply(l,u)),f}}i.hooks=l}if(n.walkTokens){const l=this.defaults.walkTokens,r=n.walkTokens;i.walkTokens=function(o){let a=[];return a.push(r.call(this,o)),l&&(a=a.concat(l.call(this,o))),a}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return se.lex(e,t??this.defaults)}parser(e,t){return ie.parse(e,t??this.defaults)}}be=new WeakSet,st=function(e,t){return(n,i)=>{const l={...i},r={...this.defaults,...l};this.defaults.async===!0&&l.async===!1&&(r.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),r.async=!0);const o=Me(this,be,ln).call(this,!!r.silent,!!r.async);if(typeof n>"u"||n===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(r.hooks&&(r.hooks.options=r),r.async)return Promise.resolve(r.hooks?r.hooks.preprocess(n):n).then(a=>e(a,r)).then(a=>r.hooks?r.hooks.processAllTokens(a):a).then(a=>r.walkTokens?Promise.all(this.walkTokens(a,r.walkTokens)).then(()=>a):a).then(a=>t(a,r)).then(a=>r.hooks?r.hooks.postprocess(a):a).catch(o);try{r.hooks&&(n=r.hooks.preprocess(n));let a=e(n,r);r.hooks&&(a=r.hooks.processAllTokens(a)),r.walkTokens&&this.walkTokens(a,r.walkTokens);let c=t(a,r);return r.hooks&&(c=r.hooks.postprocess(c)),c}catch(a){return o(a)}}},ln=function(e,t){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const i="<p>An error occurred:</p><pre>"+W(n.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(n);throw n}};const ke=new vs;function D(s,e){return ke.parse(s,e)}D.options=D.setOptions=function(s){return ke.setOptions(s),D.defaults=ke.defaults,Jt(D.defaults),D};D.getDefaults=lt;D.defaults=_e;D.use=function(...s){return ke.use(...s),D.defaults=ke.defaults,Jt(D.defaults),D};D.walkTokens=function(s,e){return ke.walkTokens(s,e)};D.parseInline=ke.parseInline;D.Parser=ie;D.parser=ie.parse;D.Renderer=We;D.TextRenderer=ft;D.Lexer=se;D.lexer=se.lex;D.Tokenizer=Ge;D.Hooks=Pe;D.parse=D;D.options;D.setOptions;D.use;D.walkTokens;D.parseInline;ie.parse;se.lex;function ys(s){let e,t=(s[0]||"<p>No summary available.</p>")+"";return{c(){e=k("div"),d(e,"class","summary-content svelte-t2dr86")},m(n,i){B(n,e,i),e.innerHTML=t},p(n,[i]){i&1&&t!==(t=(n[0]||"<p>No summary available.</p>")+"")&&(e.innerHTML=t)},i:H,o:H,d(n){n&&M(e)}}}function xs(s,e,t){let{conversation:n}=e,i="";me(()=>{var r;(r=n==null?void 0:n.transcript)!=null&&r.summary&&l(n.transcript.summary)});function l(r){if(!r){t(0,i="<p>No summary available.</p>");return}try{D.setOptions({breaks:!0,gfm:!0,headerIds:!1,mangle:!1}),t(0,i=D.parse(r))}catch(o){console.error("Error rendering markdown:",o),t(0,i=`<div class="markdown-content">${r.replace(/\n/g,"<br>")}</div>`)}}return s.$$set=r=>{"conversation"in r&&t(1,n=r.conversation)},s.$$.update=()=>{var r;s.$$.dirty&2&&(r=n==null?void 0:n.transcript)!=null&&r.summary&&l(n.transcript.summary)},[i,n]}class Ts extends ae{constructor(e){super(),oe(this,e,xs,ys,ee,{conversation:1})}}function jt(s,e,t){const n=s.slice();return n[2]=e[t],n}function $s(s){let e;return{c(){e=k("p"),e.textContent="No action items available."},m(t,n){B(t,e,n)},p:H,d(t){t&&M(e)}}}function zs(s){let e,t=ue(s[0]),n=[];for(let i=0;i<t.length;i+=1)n[i]=Dt(jt(s,t,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=Le()},m(i,l){for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(i,l);B(i,e,l)},p(i,l){if(l&1){t=ue(i[0]);let r;for(r=0;r<t.length;r+=1){const o=jt(i,t,r);n[r]?n[r].p(o,l):(n[r]=Dt(o),n[r].c(),n[r].m(e.parentNode,e))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}},d(i){i&&M(e),Ue(n,i)}}}function Dt(s){let e,t,n=(s[2].action||"Action item")+"",i,l,r,o,a,c=(s[2].assignee||"Unassigned")+"",u,f,h,g,m=(s[2].priority||"Medium")+"",b,C,T,I,w=(s[2].deadline||"Not specified")+"",v,y;return{c(){e=k("div"),t=k("h4"),i=U(n),l=R(),r=k("div"),o=k("strong"),o.textContent="Assignee:",a=R(),u=U(c),f=U(` |
          `),h=k("strong"),h.textContent="Priority:",g=R(),b=U(m),C=U(` |
          `),T=k("strong"),T.textContent="Deadline:",I=R(),v=U(w),y=R(),d(t,"class","svelte-gh7wxt"),d(r,"class","action-item-meta svelte-gh7wxt"),d(e,"class","action-item svelte-gh7wxt")},m(z,j){B(z,e,j),p(e,t),p(t,i),p(e,l),p(e,r),p(r,o),p(r,a),p(r,u),p(r,f),p(r,h),p(r,g),p(r,b),p(r,C),p(r,T),p(r,I),p(r,v),p(e,y)},p(z,j){j&1&&n!==(n=(z[2].action||"Action item")+"")&&G(i,n),j&1&&c!==(c=(z[2].assignee||"Unassigned")+"")&&G(u,c),j&1&&m!==(m=(z[2].priority||"Medium")+"")&&G(b,m),j&1&&w!==(w=(z[2].deadline||"Not specified")+"")&&G(v,w)},d(z){z&&M(e)}}}function Cs(s){let e;function t(l,r){return l[0].length>0?zs:$s}let n=t(s),i=n(s);return{c(){e=k("div"),i.c(),d(e,"class","action-items-content svelte-gh7wxt")},m(l,r){B(l,e,r),i.m(e,null)},p(l,[r]){n===(n=t(l))&&i?i.p(l,r):(i.d(1),i=n(l),i&&(i.c(),i.m(e,null)))},i:H,o:H,d(l){l&&M(e),i.d()}}}function Ss(s,e,t){let n,{conversation:i}=e;return s.$$set=l=>{"conversation"in l&&t(1,i=l.conversation)},s.$$.update=()=>{var l;s.$$.dirty&2&&t(0,n=((l=i==null?void 0:i.transcript)==null?void 0:l.action_items)||[])},[n,i]}class Rs extends ae{constructor(e){super(),oe(this,e,Ss,Cs,ee,{conversation:1})}}function Mt(s){let e,t,n,i=(s[0].title||`Conversation ${s[0].id}`)+"",l,r,o,a,c,u,f,h,g,m,b,C,T,I,w=s[3]&&Bt(s),v=s[2]&&Ft(s),y=s[0].audio_file_path&&qt(s);const z=[Ps,Es,Is],j=[];function S(_,N){return _[1]==="transcript"?0:_[1]==="summary"?1:_[1]==="actionItems"?2:-1}return~(m=S(s))&&(b=j[m]=z[m](s)),{c(){e=k("div"),t=k("div"),n=k("h2"),l=U(i),r=R(),o=k("div"),a=k("button"),a.textContent="Transcript",c=R(),w&&w.c(),u=R(),v&&v.c(),f=R(),y&&y.c(),h=R(),g=k("div"),b&&b.c(),d(n,"class","svelte-1bd7i19"),d(a,"class","tab-btn svelte-1bd7i19"),le(a,"active",s[1]==="transcript"),d(o,"class","tab-navigation svelte-1bd7i19"),d(t,"class","content-header svelte-1bd7i19"),d(g,"class","tab-content svelte-1bd7i19"),d(e,"class","conversation-content svelte-1bd7i19")},m(_,N){B(_,e,N),p(e,t),p(t,n),p(n,l),p(t,r),p(t,o),p(o,a),p(o,c),w&&w.m(o,null),p(o,u),v&&v.m(o,null),p(e,f),y&&y.m(e,null),p(e,h),p(e,g),~m&&j[m].m(g,null),C=!0,T||(I=P(a,"click",s[5]),T=!0)},p(_,N){(!C||N&1)&&i!==(i=(_[0].title||`Conversation ${_[0].id}`)+"")&&G(l,i),(!C||N&2)&&le(a,"active",_[1]==="transcript"),_[3]?w?w.p(_,N):(w=Bt(_),w.c(),w.m(o,u)):w&&(w.d(1),w=null),_[2]?v?v.p(_,N):(v=Ft(_),v.c(),v.m(o,null)):v&&(v.d(1),v=null),_[0].audio_file_path?y?(y.p(_,N),N&1&&Z(y,1)):(y=qt(_),y.c(),Z(y,1),y.m(e,h)):y&&(Te(),V(y,1,1,()=>{y=null}),$e());let x=m;m=S(_),m===x?~m&&j[m].p(_,N):(b&&(Te(),V(j[x],1,1,()=>{j[x]=null}),$e()),~m?(b=j[m],b?b.p(_,N):(b=j[m]=z[m](_),b.c()),Z(b,1),b.m(g,null)):b=null)},i(_){C||(Z(y),Z(b),C=!0)},o(_){V(y),V(b),C=!1},d(_){_&&M(e),w&&w.d(),v&&v.d(),y&&y.d(),~m&&j[m].d(),T=!1,I()}}}function Bt(s){let e,t,n;return{c(){e=k("button"),e.textContent="Summary",d(e,"class","tab-btn svelte-1bd7i19"),le(e,"active",s[1]==="summary")},m(i,l){B(i,e,l),t||(n=P(e,"click",s[6]),t=!0)},p(i,l){l&2&&le(e,"active",i[1]==="summary")},d(i){i&&M(e),t=!1,n()}}}function Ft(s){let e,t,n;return{c(){e=k("button"),e.textContent="Action Items",d(e,"class","tab-btn svelte-1bd7i19"),le(e,"active",s[1]==="actionItems")},m(i,l){B(i,e,l),t||(n=P(e,"click",s[7]),t=!0)},p(i,l){l&2&&le(e,"active",i[1]==="actionItems")},d(i){i&&M(e),t=!1,n()}}}function qt(s){let e,t;return e=new Ln({props:{conversationId:s[0].id}}),{c(){re(e.$$.fragment)},m(n,i){te(e,n,i),t=!0},p(n,i){const l={};i&1&&(l.conversationId=n[0].id),e.$set(l)},i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){V(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function Is(s){let e,t;return e=new Rs({props:{conversation:s[0]}}),{c(){re(e.$$.fragment)},m(n,i){te(e,n,i),t=!0},p(n,i){const l={};i&1&&(l.conversation=n[0]),e.$set(l)},i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){V(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function Es(s){let e,t;return e=new Ts({props:{conversation:s[0]}}),{c(){re(e.$$.fragment)},m(n,i){te(e,n,i),t=!0},p(n,i){const l={};i&1&&(l.conversation=n[0]),e.$set(l)},i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){V(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function Ps(s){let e,t;return e=new Fn({props:{conversation:s[0]}}),{c(){re(e.$$.fragment)},m(n,i){te(e,n,i),t=!0},p(n,i){const l={};i&1&&(l.conversation=n[0]),e.$set(l)},i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){V(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function As(s){let e,t,n=s[0]&&Mt(s);return{c(){n&&n.c(),e=Le()},m(i,l){n&&n.m(i,l),B(i,e,l),t=!0},p(i,[l]){i[0]?n?(n.p(i,l),l&1&&Z(n,1)):(n=Mt(i),n.c(),Z(n,1),n.m(e.parentNode,e)):n&&(Te(),V(n,1,1,()=>{n=null}),$e())},i(i){t||(Z(n),t=!0)},o(i){V(n),t=!1},d(i){i&&M(e),n&&n.d(i)}}}function Ls(s,e,t){let n,i;Ne();let l="transcript",r=null;me(()=>{ge.subscribe(f=>{var h;t(0,r=f),(h=f==null?void 0:f.transcript)!=null&&h.summary&&setTimeout(()=>{t(1,l="summary")},500)})});function o(f){t(1,l=f)}const a=()=>o("transcript"),c=()=>o("summary"),u=()=>o("actionItems");return s.$$.update=()=>{var f,h;s.$$.dirty&1&&t(3,n=(f=r==null?void 0:r.transcript)==null?void 0:f.summary),s.$$.dirty&1&&t(2,i=(h=r==null?void 0:r.transcript)==null?void 0:h.action_items)},[r,l,i,n,o,a,c,u]}class Ns extends ae{constructor(e){super(),oe(this,e,Ls,As,ee,{})}}function js(s){let e,t;return e=new Vt({}),e.$on("conversationReady",s[3]),{c(){re(e.$$.fragment)},m(n,i){te(e,n,i),t=!0},p:H,i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){V(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function Ds(s){let e,t;return e=new Ns({}),{c(){re(e.$$.fragment)},m(n,i){te(e,n,i),t=!0},p:H,i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){V(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function Ms(s){let e,t;return e=new Vt({}),e.$on("conversationReady",s[3]),{c(){re(e.$$.fragment)},m(n,i){te(e,n,i),t=!0},p:H,i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){V(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function Bs(s){let e,t,n,i,l,r,o;t=new Rn({}),t.$on("showUpload",s[2]);const a=[Ms,Ds,js],c=[];function u(f,h){return f[0]?0:f[1]?1:2}return l=u(s),r=c[l]=a[l](s),{c(){e=k("div"),re(t.$$.fragment),n=R(),i=k("main"),r.c(),d(i,"class","main-content svelte-t63m0u"),d(e,"class","app-container svelte-t63m0u")},m(f,h){B(f,e,h),te(t,e,null),p(e,n),p(e,i),c[l].m(i,null),o=!0},p(f,[h]){let g=l;l=u(f),l===g?c[l].p(f,h):(Te(),V(c[g],1,1,()=>{c[g]=null}),$e(),r=c[l],r?r.p(f,h):(r=c[l]=a[l](f),r.c()),Z(r,1),r.m(i,null))},i(f){o||(Z(t.$$.fragment,f),Z(r),o=!0)},o(f){V(t.$$.fragment,f),V(r),o=!1},d(f){f&&M(e),ne(t),c[l].d()}}}function Fs(s,e,t){let n;ce(s,ge,u=>t(1,n=u));let i=!0;me(async()=>{await l(),r()});async function l(){try{const u=await K.get("/profiles");Ie.set(u||[])}catch(u){console.error("Failed to load profiles:",u)}}function r(){const u=localStorage.getItem("activeProfileId");u?Ie.subscribe(f=>{const h=f.find(g=>g.id===parseInt(u));h?pe.set(h):f.length>0&&pe.set(f[0])})():Ie.subscribe(f=>{f.length>0&&pe.set(f[0])})()}function o(){t(0,i=!0),ge.set(null)}function a({conversationId:u}){c(u)}async function c(u){try{const f=await K.get(`/conversations/${u}`);ge.set(f),t(0,i=!1)}catch(f){console.error("Failed to load conversation:",f)}}return me(()=>{typeof window<"u"&&window.addEventListener("message",u=>{const f=u.detail;(f==null?void 0:f.type)==="loadConversation"?c(f.conversationId):(f==null?void 0:f.type)==="showUpload"&&o()})}),s.$$.update=()=>{s.$$.dirty&3&&(i?ge.set(null):n&&t(0,i=!1))},[i,n,o,a]}class qs extends ae{constructor(e){super(),oe(this,e,Fs,Bs,ee,{})}}new qs({target:document.getElementById("app")||document.body});
