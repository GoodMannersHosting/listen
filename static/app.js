var rn=Object.defineProperty;var pt=s=>{throw TypeError(s)};var on=(s,e,t)=>e in s?rn(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var O=(s,e,t)=>on(s,typeof e!="symbol"?e+"":e,t),an=(s,e,t)=>e.has(s)||pt("Cannot "+t);var ht=(s,e,t)=>e.has(s)?pt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t);var Me=(s,e,t)=>(an(s,e,"access private method"),t);function H(){}function Ot(s){return s()}function dt(){return Object.create(null)}function Y(s){s.forEach(Ot)}function Ut(s){return typeof s=="function"}function ee(s,e){return s!=s?e==e:s!==e||s&&typeof s=="object"||typeof s=="function"}function cn(s){return Object.keys(s).length===0}function un(s,...e){if(s==null){for(const n of e)n(void 0);return H}const t=s.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function ce(s,e,t){s.$$.on_destroy.push(un(e,t))}function f(s,e){s.appendChild(e)}function M(s,e,t){s.insertBefore(e,t||null)}function D(s){s.parentNode&&s.parentNode.removeChild(s)}function Ue(s,e){for(let t=0;t<s.length;t+=1)s[t]&&s[t].d(e)}function k(s){return document.createElement(s)}function Be(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function U(s){return document.createTextNode(s)}function S(){return U(" ")}function Le(){return U("")}function A(s,e,t,n){return s.addEventListener(e,t,n),()=>s.removeEventListener(e,t,n)}function Ze(s){return function(e){return e.stopPropagation(),s.call(this,e)}}function Zt(s){return function(e){e.target===this&&s.call(this,e)}}function d(s,e,t){t==null?s.removeAttribute(e):s.getAttribute(e)!==t&&s.setAttribute(e,t)}function fn(s){return Array.from(s.childNodes)}function G(s,e){e=""+e,s.data!==e&&(s.data=e)}function X(s,e){s.value=e??""}function mt(s,e,t,n){t==null?s.style.removeProperty(e):s.style.setProperty(e,t,"")}function He(s,e,t){for(let n=0;n<s.options.length;n+=1){const i=s.options[n];if(i.__value===e){i.selected=!0;return}}(!t||e!==void 0)&&(s.selectedIndex=-1)}function pn(s){const e=s.querySelector(":checked");return e&&e.__value}function le(s,e,t){s.classList.toggle(e,!!t)}function hn(s,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(s,{detail:e,bubbles:t,cancelable:n})}let Pe;function Re(s){Pe=s}function it(){if(!Pe)throw new Error("Function called outside component initialization");return Pe}function xe(s){it().$$.on_mount.push(s)}function dn(s){it().$$.on_destroy.push(s)}function Ne(){const s=it();return(e,t,{cancelable:n=!1}={})=>{const i=s.$$.callbacks[e];if(i){const l=hn(e,t,{cancelable:n});return i.slice().forEach(r=>{r.call(s,l)}),!l.defaultPrevented}return!0}}function Ht(s,e){const t=s.$$.callbacks[e.type];t&&t.slice().forEach(n=>n.call(this,e))}const we=[],Qe=[];let ye=[];const gt=[],mn=Promise.resolve();let et=!1;function gn(){et||(et=!0,mn.then(Qt))}function Ve(s){ye.push(s)}const Ye=new Set;let be=0;function Qt(){if(be!==0)return;const s=Pe;do{try{for(;be<we.length;){const e=we[be];be++,Re(e),kn(e.$$)}}catch(e){throw we.length=0,be=0,e}for(Re(null),we.length=0,be=0;Qe.length;)Qe.pop()();for(let e=0;e<ye.length;e+=1){const t=ye[e];Ye.has(t)||(Ye.add(t),t())}ye.length=0}while(we.length);for(;gt.length;)gt.pop()();et=!1,Ye.clear(),Re(s)}function kn(s){if(s.fragment!==null){s.update(),Y(s.before_update);const e=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,e),s.after_update.forEach(Ve)}}function bn(s){const e=[],t=[];ye.forEach(n=>s.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),ye=e}const Oe=new Set;let de;function $e(){de={r:0,c:[],p:de}}function Te(){de.r||Y(de.c),de=de.p}function Z(s,e){s&&s.i&&(Oe.delete(s),s.i(e))}function V(s,e,t,n){if(s&&s.o){if(Oe.has(s))return;Oe.add(s),de.c.push(()=>{Oe.delete(s),n&&(t&&s.d(1),n())}),s.o(e)}else n&&n()}function ue(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function re(s){s&&s.c()}function te(s,e,t){const{fragment:n,after_update:i}=s.$$;n&&n.m(e,t),Ve(()=>{const l=s.$$.on_mount.map(Ot).filter(Ut);s.$$.on_destroy?s.$$.on_destroy.push(...l):Y(l),s.$$.on_mount=[]}),i.forEach(Ve)}function ne(s,e){const t=s.$$;t.fragment!==null&&(bn(t.after_update),Y(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function _n(s,e){s.$$.dirty[0]===-1&&(we.push(s),gn(),s.$$.dirty.fill(0)),s.$$.dirty[e/31|0]|=1<<e%31}function oe(s,e,t,n,i,l,r=null,o=[-1]){const a=Pe;Re(s);const c=s.$$={fragment:null,ctx:[],props:l,update:H,not_equal:i,bound:dt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:dt(),dirty:o,skip_bound:!1,root:e.target||a.$$.root};r&&r(c.root);let p=!1;if(c.ctx=t?t(s,e.props||{},(u,h,...m)=>{const g=m.length?m[0]:h;return c.ctx&&i(c.ctx[u],c.ctx[u]=g)&&(!c.skip_bound&&c.bound[u]&&c.bound[u](g),p&&_n(s,u)),h}):[],c.update(),p=!0,Y(c.before_update),c.fragment=n?n(c.ctx):!1,e.target){if(e.hydrate){const u=fn(e.target);c.fragment&&c.fragment.l(u),u.forEach(D)}else c.fragment&&c.fragment.c();e.intro&&Z(s.$$.fragment),te(s,e.target,e.anchor),Qt()}Re(a)}class ae{constructor(){O(this,"$$");O(this,"$$set")}$destroy(){ne(this,1),this.$destroy=H}$on(e,t){if(!Ut(t))return H;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!cn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const wn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(wn);const _e=[];function ze(s,e=H){let t;const n=new Set;function i(o){if(ee(s,o)&&(s=o,t)){const a=!_e.length;for(const c of n)c[1](),_e.push(c,s);if(a){for(let c=0;c<_e.length;c+=2)_e[c][0](_e[c+1]);_e.length=0}}}function l(o){i(o(s))}function r(o,a=H){const c=[o,a];return n.add(c),n.size===1&&(t=e(i,l)||H),o(s),()=>{n.delete(c),n.size===0&&t&&(t(),t=null)}}return{set:i,update:l,subscribe:r}}const pe=ze(null),Ie=ze([]),Je=ze([]),ve=ze(null),tt=ze(null),kt=ze(!1),Ce="/api",W={async get(s){const e=await fetch(`${Ce}${s}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()},async post(s,e){const t=await fetch(`${Ce}${s}`,{method:"POST",headers:e instanceof FormData?{}:{"Content-Type":"application/json"},body:e instanceof FormData?e:JSON.stringify(e)});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return t.json()},async put(s,e){const t=await fetch(`${Ce}${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return t.json()},async delete(s){const e=await fetch(`${Ce}${s}`,{method:"DELETE"});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.status===204?null:e.json()},async uploadFile(s,e){return new Promise((t,n)=>{const i=new XMLHttpRequest;i.upload.addEventListener("progress",l=>{if(l.lengthComputable&&e){const r=Math.round(l.loaded/l.total*100);e(r)}}),i.addEventListener("load",()=>{if(i.status>=200&&i.status<300)try{t(JSON.parse(i.responseText))}catch{n(new Error("Failed to parse response"))}else n(new Error(i.statusText||"Upload failed"))}),i.addEventListener("error",()=>n(new Error("Network error"))),i.open("POST",`${Ce}/upload`),i.send(s)})}};function bt(s){const e=new Date(s),n=new Date-e,i=Math.floor(n/1e3),l=Math.floor(i/60),r=Math.floor(l/60),o=Math.floor(r/24);return o>0?`${o} day${o>1?"s":""} ago`:r>0?`${r} hour${r>1?"s":""} ago`:l>0?`${l} minute${l>1?"s":""} ago`:"Just now"}function fe(s){const e=Math.floor(s/60),t=Math.floor(s%60);return`${e}:${t.toString().padStart(2,"0")}`}function vn(s){let e,t,n,i,l,r,o,a,c,p,u,h,m,g;return{c(){e=k("div"),t=k("div"),n=k("h3"),n.textContent="Create New Profile",i=S(),l=k("input"),r=S(),o=k("input"),a=S(),c=k("div"),p=k("button"),p.textContent="Create",u=S(),h=k("button"),h.textContent="Cancel",d(n,"class","svelte-z7ivhd"),d(l,"type","text"),d(l,"placeholder","Profile Name"),l.required=!0,d(l,"class","svelte-z7ivhd"),d(o,"type","text"),d(o,"placeholder","Display Name (optional)"),d(o,"class","svelte-z7ivhd"),d(p,"class","btn-primary svelte-z7ivhd"),d(h,"class","btn-secondary svelte-z7ivhd"),d(c,"class","modal-actions svelte-z7ivhd"),d(t,"class","modal-content svelte-z7ivhd"),d(e,"class","modal svelte-z7ivhd")},m(b,C){M(b,e,C),f(e,t),f(t,n),f(t,i),f(t,l),X(l,s[0]),f(t,r),f(t,o),X(o,s[1]),f(t,a),f(t,c),f(c,p),f(c,u),f(c,h),m||(g=[A(l,"input",s[6]),A(o,"input",s[7]),A(p,"click",s[2]),A(h,"click",s[3]),A(t,"click",Ze(s[5])),A(e,"click",Zt(s[3])),A(e,"keydown",s[4])],m=!0)},p(b,[C]){C&1&&l.value!==b[0]&&X(l,b[0]),C&2&&o.value!==b[1]&&X(o,b[1])},i:H,o:H,d(b){b&&D(e),m=!1,Y(g)}}}function yn(s,e,t){const n=Ne();let i="",l="";async function r(){if(!i.trim()){alert("Profile name is required");return}try{const h=await W.post("/profiles",{name:i.trim(),display_name:l.trim()||null}),m=await W.get("/profiles");Ie.set(m||[]),pe.set(h),n("close"),t(0,i=""),t(1,l="")}catch(h){alert(h.message||"Failed to create profile")}}function o(){t(0,i=""),t(1,l=""),n("close")}function a(h){h.key==="Escape"&&o()}function c(h){Ht.call(this,s,h)}function p(){i=this.value,t(0,i)}function u(){l=this.value,t(1,l)}return[i,l,r,o,a,c,p,u]}class xn extends ae{constructor(e){super(),oe(this,e,yn,vn,ee,{})}}function _t(s){let e,t,n,i,l,r,o,a,c,p,u,h;return{c(){e=k("div"),t=k("div"),n=k("h3"),n.textContent="Rename Conversation",i=S(),l=k("input"),r=S(),o=k("div"),a=k("button"),a.textContent="Save",c=S(),p=k("button"),p.textContent="Cancel",d(n,"class","svelte-z7ivhd"),d(l,"type","text"),d(l,"placeholder","Conversation title"),l.required=!0,d(l,"class","svelte-z7ivhd"),d(a,"class","btn-primary svelte-z7ivhd"),d(p,"class","btn-secondary svelte-z7ivhd"),d(o,"class","modal-actions svelte-z7ivhd"),d(t,"class","modal-content svelte-z7ivhd"),d(e,"class","modal svelte-z7ivhd")},m(m,g){M(m,e,g),f(e,t),f(t,n),f(t,i),f(t,l),X(l,s[1]),f(t,r),f(t,o),f(o,a),f(o,c),f(o,p),u||(h=[A(l,"input",s[8]),A(a,"click",s[2]),A(p,"click",s[3]),A(t,"click",Ze(s[7])),A(e,"click",Zt(s[3])),A(e,"keydown",s[4])],u=!0)},p(m,g){g&2&&l.value!==m[1]&&X(l,m[1])},d(m){m&&D(e),u=!1,Y(h)}}}function $n(s){let e,t=s[0]&&_t(s);return{c(){t&&t.c(),e=Le()},m(n,i){t&&t.m(n,i),M(n,e,i)},p(n,[i]){n[0]?t?t.p(n,i):(t=_t(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:H,o:H,d(n){n&&D(e),t&&t.d(n)}}}function Tn(s,e,t){let n,i,l;ce(s,pe,g=>t(9,i=g)),ce(s,Je,g=>t(6,l=g));const r=Ne();let{conversationId:o}=e,a="";async function c(){if(!a.trim()){alert("Title cannot be empty");return}try{await W.put(`/conversations/${o}`,{title:a.trim()});const g=await W.get(`/conversations?profile_id=${i.id}`);Je.set(g||[]),r("close")}catch(g){alert(g.message||"Failed to rename conversation")}}function p(){r("close")}function u(g){g.key==="Enter"?c():g.key==="Escape"&&p()}function h(g){Ht.call(this,s,g)}function m(){a=this.value,t(1,a),t(5,n),t(0,o),t(6,l)}return s.$$set=g=>{"conversationId"in g&&t(0,o=g.conversationId)},s.$$.update=()=>{s.$$.dirty&65&&t(5,n=l.find(g=>g.id===o)),s.$$.dirty&33&&n&&t(1,a=n.title||`Conversation ${o}`)},[o,a,c,p,u,n,l,h,m]}class zn extends ae{constructor(e){super(),oe(this,e,Tn,$n,ee,{conversationId:0})}}function wt(s,e,t){const n=s.slice();return n[22]=e[t],n}function vt(s,e,t){const n=s.slice();return n[25]=e[t],n}function yt(s){let e,t=(s[25].display_name||s[25].name)+"",n,i;return{c(){e=k("option"),n=U(t),e.__value=i=s[25].id,X(e,e.__value)},m(l,r){M(l,e,r),f(e,n)},p(l,r){r&16&&t!==(t=(l[25].display_name||l[25].name)+"")&&G(n,t),r&16&&i!==(i=l[25].id)&&(e.__value=i,X(e,e.__value))},d(l){l&&D(e)}}}function xt(s){let e,t,n,i=(s[22].title||`Conversation ${s[22].id}`)+"",l,r,o,a=bt(s[22].created_at)+"",c,p,u,h,m,g,b,C,$;function I(){return s[14](s[22])}function w(){return s[15](s[22])}function v(){return s[16](s[22])}return{c(){e=k("div"),t=k("div"),n=k("div"),l=U(i),r=S(),o=k("div"),c=U(a),p=S(),u=k("div"),h=k("button"),h.textContent="‚úèÔ∏è",m=S(),g=k("button"),g.textContent="üóëÔ∏è",b=S(),d(n,"class","conversation-title svelte-5487mw"),d(o,"class","conversation-time svelte-5487mw"),d(t,"class","conversation-info svelte-5487mw"),d(h,"class","conversation-action-btn svelte-5487mw"),d(h,"title","Rename"),d(g,"class","conversation-action-btn delete svelte-5487mw"),d(g,"title","Delete"),d(u,"class","conversation-actions svelte-5487mw"),d(e,"class","conversation-item svelte-5487mw")},m(y,z){M(y,e,z),f(e,t),f(t,n),f(n,l),f(t,r),f(t,o),f(o,c),f(e,p),f(e,u),f(u,h),f(u,m),f(u,g),f(e,b),C||($=[A(t,"click",I),A(h,"click",Ze(w)),A(g,"click",Ze(v))],C=!0)},p(y,z){s=y,z&64&&i!==(i=(s[22].title||`Conversation ${s[22].id}`)+"")&&G(l,i),z&64&&a!==(a=bt(s[22].created_at)+"")&&G(c,a)},d(y){y&&D(e),C=!1,Y($)}}}function $t(s){let e,t;return e=new xn({}),e.$on("close",s[17]),{c(){re(e.$$.fragment)},m(n,i){te(e,n,i),t=!0},p:H,i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){V(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function Tt(s){let e,t;return e=new zn({props:{conversationId:s[3]}}),e.$on("close",s[18]),{c(){re(e.$$.fragment)},m(n,i){te(e,n,i),t=!0},p(n,i){const l={};i&8&&(l.conversationId=n[3]),e.$set(l)},i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){V(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function Cn(s){let e,t,n,i,l,r,o,a,c,p,u,h,m,g,b,C,$,I,w,v,y,z,N,R=ue(s[4]),_=[];for(let T=0;T<R.length;T+=1)_[T]=yt(vt(s,R,T));let L=ue(s[6]),x=[];for(let T=0;T<L.length;T+=1)x[T]=xt(wt(s,L,T));let P=s[1]&&$t(s),E=s[2]&&Tt(s);return{c(){e=k("aside"),t=k("div"),n=k("h2"),n.textContent="Transcribe",i=S(),l=k("button"),l.textContent="‚ò∞",r=S(),o=k("div"),a=k("select"),c=k("option"),c.textContent="Select Profile...";for(let T=0;T<_.length;T+=1)_[T].c();u=S(),h=k("button"),h.textContent="+ New Profile",m=S(),g=k("div"),b=k("button"),b.textContent="+ New Conversation",C=S(),$=k("div");for(let T=0;T<x.length;T+=1)x[T].c();I=S(),P&&P.c(),w=S(),E&&E.c(),v=Le(),d(n,"class","svelte-5487mw"),d(l,"class","sidebar-toggle svelte-5487mw"),d(l,"aria-label","Toggle sidebar"),d(t,"class","sidebar-header svelte-5487mw"),c.__value="",X(c,c.__value),d(a,"class","profile-select svelte-5487mw"),d(h,"class","btn-secondary svelte-5487mw"),d(o,"class","profile-section svelte-5487mw"),d(b,"class","btn-primary svelte-5487mw"),d($,"class","conversations-list svelte-5487mw"),d(g,"class","sidebar-content svelte-5487mw"),d(e,"class","sidebar svelte-5487mw"),le(e,"collapsed",s[5])},m(T,B){var J;M(T,e,B),f(e,t),f(t,n),f(t,i),f(t,l),f(e,r),f(e,o),f(o,a),f(a,c);for(let Q=0;Q<_.length;Q+=1)_[Q]&&_[Q].m(a,null);He(a,(J=s[0])==null?void 0:J.id),f(o,u),f(o,h),f(e,m),f(e,g),f(g,b),f(g,C),f(g,$);for(let Q=0;Q<x.length;Q+=1)x[Q]&&x[Q].m($,null);M(T,I,B),P&&P.m(T,B),M(T,w,B),E&&E.m(T,B),M(T,v,B),y=!0,z||(N=[A(l,"click",s[7]),A(a,"change",s[8]),A(h,"click",s[13]),A(b,"click",s[9])],z=!0)},p(T,[B]){var J,Q;if(B&16){R=ue(T[4]);let F;for(F=0;F<R.length;F+=1){const he=vt(T,R,F);_[F]?_[F].p(he,B):(_[F]=yt(he),_[F].c(),_[F].m(a,null))}for(;F<_.length;F+=1)_[F].d(1);_.length=R.length}if((!y||B&17&&p!==(p=(J=T[0])==null?void 0:J.id))&&He(a,(Q=T[0])==null?void 0:Q.id),B&7232){L=ue(T[6]);let F;for(F=0;F<L.length;F+=1){const he=wt(T,L,F);x[F]?x[F].p(he,B):(x[F]=xt(he),x[F].c(),x[F].m($,null))}for(;F<x.length;F+=1)x[F].d(1);x.length=L.length}(!y||B&32)&&le(e,"collapsed",T[5]),T[1]?P?(P.p(T,B),B&2&&Z(P,1)):(P=$t(T),P.c(),Z(P,1),P.m(w.parentNode,w)):P&&($e(),V(P,1,1,()=>{P=null}),Te()),T[2]?E?(E.p(T,B),B&4&&Z(E,1)):(E=Tt(T),E.c(),Z(E,1),E.m(v.parentNode,v)):E&&($e(),V(E,1,1,()=>{E=null}),Te())},i(T){y||(Z(P),Z(E),y=!0)},o(T){V(P),V(E),y=!1},d(T){T&&(D(e),D(I),D(w),D(v)),Ue(_,T),Ue(x,T),P&&P.d(T),E&&E.d(T),z=!1,Y(N)}}}function Sn(s,e,t){let n,i,l,r;ce(s,pe,R=>t(0,n=R)),ce(s,Ie,R=>t(4,i=R)),ce(s,kt,R=>t(5,l=R)),ce(s,Je,R=>t(6,r=R));const o=Ne();let a=!1,c=!1,p=null;function u(){kt.update(R=>!R)}async function h(R){const _=parseInt(R.target.value);if(_){const L=i.find(x=>x.id===_);L&&(pe.set(L),localStorage.setItem("activeProfileId",_.toString()))}}async function m(R){try{const _=await W.get(`/conversations?profile_id=${R}`);Je.set(_||[])}catch(_){console.error("Failed to load conversations:",_)}}function g(){o("showUpload")}async function b(R){try{const _=await W.get(`/conversations/${R}`);ve.set(_),window.dispatchEvent(new CustomEvent("message",{detail:{type:"loadConversation",conversationId:R}}))}catch(_){console.error("Failed to load conversation:",_)}}function C(R){t(3,p=R),t(2,c=!0)}function $(R){confirm("Are you sure you want to delete this conversation?")&&W.delete(`/conversations/${R}`).then(()=>{m(n==null?void 0:n.id)})}const I=()=>t(1,a=!0),w=R=>b(R.id),v=R=>C(R.id),y=R=>$(R.id),z=()=>t(1,a=!1),N=()=>{t(2,c=!1),t(3,p=null)};return s.$$.update=()=>{s.$$.dirty&1&&(n==null||n.id),s.$$.dirty&1&&n&&m(n.id)},[n,a,c,p,i,l,r,u,h,g,b,C,$,I,w,v,y,z,N]}class Rn extends ae{constructor(e){super(),oe(this,e,Sn,Cn,ee,{})}}function zt(s){let e,t,n,i,l,r,o,a,c,p,u,h,m,g,b,C;return{c(){e=k("div"),t=k("label"),n=k("input"),i=U(" Enable Speaker Diarization"),l=S(),r=k("label"),o=k("input"),a=U(" Generate Summary"),c=S(),p=k("label"),u=k("input"),h=U(" Generate Action Items"),m=S(),g=k("button"),g.textContent="Upload & Process",d(n,"type","checkbox"),d(n,"class","svelte-z4eamb"),d(t,"class","svelte-z4eamb"),d(o,"type","checkbox"),d(o,"class","svelte-z4eamb"),d(r,"class","svelte-z4eamb"),d(u,"type","checkbox"),d(u,"class","svelte-z4eamb"),d(p,"class","svelte-z4eamb"),d(g,"class","btn-primary"),d(e,"class","upload-options svelte-z4eamb")},m($,I){M($,e,I),f(e,t),f(t,n),n.checked=s[6],f(t,i),f(e,l),f(e,r),f(r,o),o.checked=s[7],f(r,a),f(e,c),f(e,p),f(p,u),u.checked=s[8],f(p,h),f(e,m),f(e,g),b||(C=[A(n,"change",s[16]),A(o,"change",s[17]),A(u,"change",s[18]),A(g,"click",s[13])],b=!0)},p($,I){I&64&&(n.checked=$[6]),I&128&&(o.checked=$[7]),I&256&&(u.checked=$[8])},d($){$&&D(e),b=!1,Y(C)}}}function Ct(s){let e,t,n,i,l,r;return{c(){e=k("div"),t=k("div"),n=k("div"),i=S(),l=k("p"),r=U(s[5]),d(n,"class","progress-fill svelte-z4eamb"),mt(n,"width",s[4]+"%"),d(t,"class","progress-bar svelte-z4eamb"),d(l,"class","svelte-z4eamb"),d(e,"class","upload-progress svelte-z4eamb")},m(o,a){M(o,e,a),f(e,t),f(t,n),f(e,i),f(e,l),f(l,r)},p(o,a){a&16&&mt(n,"width",o[4]+"%"),a&32&&G(r,o[5])},d(o){o&&D(e)}}}function In(s){let e,t,n,i,l,r,o,a,c,p,u,h,m,g,b,C,$,I,w=s[2]&&zt(s),v=s[3]&&Ct(s);return{c(){e=k("div"),t=k("div"),n=Be("svg"),i=Be("path"),l=Be("polyline"),r=Be("line"),o=S(),a=k("h3"),a.textContent="Upload Audio File",c=S(),p=k("p"),p.textContent="Drag and drop your audio file here, or click to browse",u=S(),h=k("input"),m=S(),g=k("button"),g.textContent="Browse Files",b=S(),w&&w.c(),C=S(),v&&v.c(),d(i,"d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"),d(l,"points","17 8 12 3 7 8"),d(r,"x1","12"),d(r,"y1","3"),d(r,"x2","12"),d(r,"y2","15"),d(n,"class","upload-icon svelte-z4eamb"),d(n,"viewBox","0 0 24 24"),d(n,"fill","none"),d(n,"stroke","currentColor"),d(n,"stroke-width","2"),d(a,"class","svelte-z4eamb"),d(p,"class","svelte-z4eamb"),d(h,"type","file"),d(h,"id","fileInput"),d(h,"accept","audio/*,.mp3,.m4a,.mp4,.ogg,.wav,.flac"),h.hidden=!0,d(g,"class","btn-primary"),d(t,"class","upload-zone svelte-z4eamb"),le(t,"dragover",s[1]),d(e,"class","upload-area svelte-z4eamb")},m(y,z){M(y,e,z),f(e,t),f(t,n),f(n,i),f(n,l),f(n,r),f(t,o),f(t,a),f(t,c),f(t,p),f(t,u),f(t,h),s[14](h),f(t,m),f(t,g),f(t,b),w&&w.m(t,null),f(t,C),v&&v.m(t,null),$||(I=[A(h,"change",s[12]),A(g,"click",s[15]),A(t,"dragover",s[9]),A(t,"dragleave",s[10]),A(t,"drop",s[11])],$=!0)},p(y,[z]){y[2]?w?w.p(y,z):(w=zt(y),w.c(),w.m(t,C)):w&&(w.d(1),w=null),y[3]?v?v.p(y,z):(v=Ct(y),v.c(),v.m(t,null)):v&&(v.d(1),v=null),z&2&&le(t,"dragover",y[1])},i:H,o:H,d(y){y&&D(e),s[14](null),w&&w.d(),v&&v.d(),$=!1,Y(I)}}}function En(s,e,t){let n;ce(s,pe,x=>t(20,n=x));const i=Ne();let l,r=!1,o=!1,a=!1,c=0,p="Processing...",u=null,h=!1,m=!1,g=!1;function b(x){x.preventDefault(),t(1,r=!0)}function C(){t(1,r=!1)}function $(x){x.preventDefault(),t(1,r=!1),x.dataTransfer.files.length>0&&w(x.dataTransfer.files[0])}function I(x){x.target.files.length>0&&w(x.target.files[0])}function w(x){const P=[".mp3",".m4a",".mp4",".ogg",".wav",".flac"],E="."+x.name.split(".").pop().toLowerCase();if(!P.includes(E)){alert("Unsupported file type. Please upload an audio file.");return}u=x,t(2,o=!0)}async function v(){if(!n){alert("Please select a profile first");return}if(!u){alert("Please select a file");return}const x=new FormData;x.append("file",u),x.append("profile_id",n.id),x.append("diarization",h),x.append("generate_summary",m),x.append("generate_action_items",g),t(2,o=!1),t(3,a=!0),t(4,c=0),t(5,p="Uploading file...");try{const P=await W.uploadFile(x,E=>{t(4,c=E),t(5,p=`Uploading file... ${E}%`)});t(4,c=5),t(5,p="Upload complete. Starting processing..."),P.status==="processing"&&P.conversation_id?(t(5,p="Processing audio... This may take a few minutes."),y(P.conversation_id)):P.conversation_id&&(i("conversationReady",{conversationId:P.conversation_id}),t(3,a=!1))}catch(P){alert(P.message||"Upload failed"),t(3,a=!1)}}async function y(x){let E=0;const T=async()=>{try{const B=await W.get(`/conversations/${x}/job`);if(t(4,c=B.progress||0),B.status==="completed"){t(5,p="Processing complete!"),t(4,c=100),i("conversationReady",{conversationId:x}),t(3,a=!1);return}else if(B.status==="failed"){t(5,p=`Processing failed: ${B.error||"Unknown error"}`),alert(`Processing failed: ${B.error||"Unknown error"}`),t(3,a=!1);return}else t(5,p=`Processing... ${c}%`);E++,E<300?setTimeout(T,1e3):t(5,p="Processing is taking longer than expected. Please check back later.")}catch{E++,E<300&&setTimeout(T,2e3)}};T()}function z(x){Qe[x?"unshift":"push"](()=>{l=x,t(0,l)})}const N=()=>l==null?void 0:l.click();function R(){h=this.checked,t(6,h)}function _(){m=this.checked,t(7,m)}function L(){g=this.checked,t(8,g)}return[l,r,o,a,c,p,h,m,g,b,C,$,I,v,z,N,R,_,L]}class Vt extends ae{constructor(e){super(),oe(this,e,En,In,ee,{})}}function An(s){let e,t,n,i,l,r=s[1]?"‚è∏":"‚ñ∂",o,a,c,p=fe(s[2])+"",u,h,m,g,b,C,$=fe(s[3])+"",I,w,v,y,z,N,R,_,L,x,P,E,T,B;return{c(){e=k("div"),t=k("audio"),n=S(),i=k("div"),l=k("button"),o=U(r),a=S(),c=k("span"),u=U(p),h=S(),m=k("input"),b=S(),C=k("span"),I=U($),w=S(),v=k("select"),y=k("option"),y.textContent="0.5x",z=k("option"),z.textContent="1x",N=k("option"),N.textContent="1.25x",R=k("option"),R.textContent="1.5x",_=k("option"),_.textContent="2x",L=S(),x=k("label"),x.textContent="Volume:",P=S(),E=k("input"),d(t,"class","svelte-7jn3j0"),d(l,"class","control-btn svelte-7jn3j0"),d(m,"type","range"),d(m,"min","0"),d(m,"max",g=s[3]||100),m.value=s[2],d(m,"class","seek-bar svelte-7jn3j0"),y.__value=.5,X(y,y.__value),z.__value=1,X(z,z.__value),N.__value=1.25,X(N,N.__value),R.__value=1.5,X(R,R.__value),_.__value=2,X(_,_.__value),d(v,"class","speed-select svelte-7jn3j0"),s[4]===void 0&&Ve(()=>s[13].call(v)),d(x,"for","volumeControl"),d(x,"class","volume-label svelte-7jn3j0"),d(E,"type","range"),d(E,"id","volumeControl"),d(E,"min","0"),d(E,"max","100"),E.value=s[5],d(E,"class","volume-slider svelte-7jn3j0"),d(i,"class","audio-controls svelte-7jn3j0"),d(e,"class","audio-player-container svelte-7jn3j0")},m(J,Q){M(J,e,Q),f(e,t),s[12](t),f(e,n),f(e,i),f(i,l),f(l,o),f(i,a),f(i,c),f(c,u),f(i,h),f(i,m),f(i,b),f(i,C),f(C,I),f(i,w),f(i,v),f(v,y),f(v,z),f(v,N),f(v,R),f(v,_),He(v,s[4],!0),f(i,L),f(i,x),f(i,P),f(i,E),T||(B=[A(l,"click",s[6]),A(m,"mousedown",s[7]),A(m,"mouseup",s[8]),A(m,"touchstart",s[7],{passive:!0}),A(m,"touchend",s[8]),A(m,"change",s[8]),A(v,"change",s[13]),A(v,"change",s[9]),A(E,"input",s[10])],T=!0)},p(J,[Q]){Q&2&&r!==(r=J[1]?"‚è∏":"‚ñ∂")&&G(o,r),Q&4&&p!==(p=fe(J[2])+"")&&G(u,p),Q&8&&g!==(g=J[3]||100)&&d(m,"max",g),Q&4&&(m.value=J[2]),Q&8&&$!==($=fe(J[3])+"")&&G(I,$),Q&16&&He(v,J[4]),Q&32&&(E.value=J[5])},i:H,o:H,d(J){J&&D(e),s[12](null),T=!1,Y(B)}}}function Pn(s,e,t){let n;ce(s,tt,z=>t(16,n=z));let{conversationId:i}=e,l,r=!1,o=0,a=0,c=1,p=100,u=!1,h=null;xe(()=>{l&&(t(0,l.src=`/api/audio/${i}`,l),m())}),dn(()=>{l&&l.pause()});function m(){t(0,l.playbackRate=1,l),l.addEventListener("loadedmetadata",()=>{t(3,a=l.duration),t(0,l.playbackRate=1,l)}),l.addEventListener("timeupdate",()=>{u||(t(2,o=l.currentTime),w(l.currentTime))}),l.addEventListener("ended",()=>{t(1,r=!1)})}function g(){l.paused?(l.play(),t(1,r=!0)):(l.pause(),t(1,r=!1))}function b(){u=!0}function C(z){u&&(t(2,o=parseFloat(z.target.value)),t(0,l.currentTime=o,l),w(o),u=!1)}function $(z){t(4,c=parseFloat(z.target.value)),t(0,l.playbackRate=c,l)}function I(z){t(5,p=z.target.value),t(0,l.volume=p/100,l)}function w(z){const N=n;if(!N||N.length===0)return;const R=.1;let _=null;for(let L=0;L<N.length;L++){const x=N[L];if(z>=x.start_time&&z<x.end_time+R){_=L;break}}if(_!==null){const L=`segment-${_}`,x=document.getElementById(L);if(x&&L!==h){if(h){const E=document.getElementById(h);E&&E.classList.remove("active")}x.classList.add("active"),h=L;const P=document.querySelector(".transcript-content");if(P){const E=P.getBoundingClientRect(),T=x.getBoundingClientRect();if(!(T.top>=E.top&&T.bottom<=E.bottom)){const J=x.offsetTop,Q=P.clientHeight,F=x.offsetHeight,he=J-Q/2+F/2;P.scrollTo({top:he,behavior:"smooth"})}}}}}function v(z){Qe[z?"unshift":"push"](()=>{l=z,t(0,l)})}function y(){c=pn(this),t(4,c)}return s.$$set=z=>{"conversationId"in z&&t(11,i=z.conversationId)},[l,r,o,a,c,p,g,b,C,$,I,i,v,y]}class Ln extends ae{constructor(e){super(),oe(this,e,Pn,An,ee,{conversationId:11})}}function St(s,e,t){const n=s.slice();return n[3]=e[t],n[5]=t,n}function Nn(s){let e;return{c(){e=k("p"),e.textContent="No transcript available."},m(t,n){M(t,e,n)},p:H,d(t){t&&D(e)}}}function jn(s){let e,t=s[0].transcript.transcript_text+"",n;return{c(){e=k("p"),n=U(t)},m(i,l){M(i,e,l),f(e,n)},p(i,l){l&1&&t!==(t=i[0].transcript.transcript_text+"")&&G(n,t)},d(i){i&&D(e)}}}function Dn(s){let e,t=ue(s[1]),n=[];for(let i=0;i<t.length;i+=1)n[i]=It(St(s,t,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=Le()},m(i,l){for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(i,l);M(i,e,l)},p(i,l){if(l&2){t=ue(i[1]);let r;for(r=0;r<t.length;r+=1){const o=St(i,t,r);n[r]?n[r].p(o,l):(n[r]=It(o),n[r].c(),n[r].m(e.parentNode,e))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}},d(i){i&&D(e),Ue(n,i)}}}function Rt(s){let e,t,n=s[3].speaker_label+"",i,l;return{c(){e=k("span"),t=U("["),i=U(n),l=U("]"),d(e,"class","speaker-label svelte-iis6p9")},m(r,o){M(r,e,o),f(e,t),f(e,i),f(e,l)},p(r,o){o&2&&n!==(n=r[3].speaker_label+"")&&G(i,n)},d(r){r&&D(e)}}}function It(s){let e,t,n,i,l=fe(s[3].start_time)+"",r,o,a=fe(s[3].end_time)+"",c,p,u,h=s[3].text+"",m,g,b,C,$=s[3].speaker_label&&Rt(s);return{c(){e=k("div"),t=k("div"),$&&$.c(),n=S(),i=k("span"),r=U(l),o=U(" - "),c=U(a),p=S(),u=k("div"),m=U(h),g=S(),d(i,"class","timestamp svelte-iis6p9"),d(t,"class","segment-header svelte-iis6p9"),d(u,"class","segment-text svelte-iis6p9"),d(e,"class","transcript-segment svelte-iis6p9"),d(e,"id","segment-"+s[5]),d(e,"data-start-time",b=s[3].start_time),d(e,"data-end-time",C=s[3].end_time)},m(I,w){M(I,e,w),f(e,t),$&&$.m(t,null),f(t,n),f(t,i),f(i,r),f(i,o),f(i,c),f(e,p),f(e,u),f(u,m),f(e,g)},p(I,w){I[3].speaker_label?$?$.p(I,w):($=Rt(I),$.c(),$.m(t,n)):$&&($.d(1),$=null),w&2&&l!==(l=fe(I[3].start_time)+"")&&G(r,l),w&2&&a!==(a=fe(I[3].end_time)+"")&&G(c,a),w&2&&h!==(h=I[3].text+"")&&G(m,h),w&2&&b!==(b=I[3].start_time)&&d(e,"data-start-time",b),w&2&&C!==(C=I[3].end_time)&&d(e,"data-end-time",C)},d(I){I&&D(e),$&&$.d()}}}function Mn(s){let e;function t(l,r){var o,a;return l[1].length>0?Dn:(a=(o=l[0])==null?void 0:o.transcript)!=null&&a.transcript_text?jn:Nn}let n=t(s),i=n(s);return{c(){e=k("div"),i.c(),d(e,"class","transcript-content svelte-iis6p9")},m(l,r){M(l,e,r),i.m(e,null)},p(l,[r]){n===(n=t(l))&&i?i.p(l,r):(i.d(1),i=n(l),i&&(i.c(),i.m(e,null)))},i:H,o:H,d(l){l&&D(e),i.d()}}}function Bn(s,e,t){let{conversation:n}=e,i=[];xe(async()=>{n!=null&&n.transcript&&await l()});async function l(){var r;if((r=n==null?void 0:n.transcript)!=null&&r.segments)t(1,i=n.transcript.segments),tt.set(i);else if(n!=null&&n.id)try{const o=await W.get(`/conversations/${n.id}/transcript/segments`);o&&(t(1,i=o),tt.set(i))}catch(o){console.error("Failed to load segments:",o)}}return s.$$set=r=>{"conversation"in r&&t(0,n=r.conversation)},s.$$.update=()=>{s.$$.dirty&1&&n!=null&&n.transcript&&l()},[n,i]}class qn extends ae{constructor(e){super(),oe(this,e,Bn,Mn,ee,{conversation:0})}}function lt(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let ke=lt();function Jt(s){ke=s}const Gt=/[&<>"']/,Fn=new RegExp(Gt.source,"g"),Xt=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,On=new RegExp(Xt.source,"g"),Un={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Et=s=>Un[s];function K(s,e){if(e){if(Gt.test(s))return s.replace(Fn,Et)}else if(Xt.test(s))return s.replace(On,Et);return s}const Zn=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function Hn(s){return s.replace(Zn,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const Qn=/(^|[^\[])\^/g;function q(s,e){let t=typeof s=="string"?s:s.source;e=e||"";const n={replace:(i,l)=>{let r=typeof l=="string"?l:l.source;return r=r.replace(Qn,"$1"),t=t.replace(i,r),n},getRegex:()=>new RegExp(t,e)};return n}function At(s){try{s=encodeURI(s).replace(/%25/g,"%")}catch{return null}return s}const Ee={exec:()=>null};function Pt(s,e){const t=s.replace(/\|/g,(l,r,o)=>{let a=!1,c=r;for(;--c>=0&&o[c]==="\\";)a=!a;return a?"|":" |"}),n=t.split(/ \|/);let i=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),e)if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(/\\\|/g,"|");return n}function qe(s,e,t){const n=s.length;if(n===0)return"";let i=0;for(;i<n&&s.charAt(n-i-1)===e;)i++;return s.slice(0,n-i)}function Vn(s,e){if(s.indexOf(e[1])===-1)return-1;let t=0;for(let n=0;n<s.length;n++)if(s[n]==="\\")n++;else if(s[n]===e[0])t++;else if(s[n]===e[1]&&(t--,t<0))return n;return-1}function Lt(s,e,t,n){const i=e.href,l=e.title?K(e.title):null,r=s[1].replace(/\\([\[\]])/g,"$1");if(s[0].charAt(0)!=="!"){n.state.inLink=!0;const o={type:"link",raw:t,href:i,title:l,text:r,tokens:n.inlineTokens(r)};return n.state.inLink=!1,o}return{type:"image",raw:t,href:i,title:l,text:K(r)}}function Jn(s,e){const t=s.match(/^(\s+)(?:```)/);if(t===null)return e;const n=t[1];return e.split(`
`).map(i=>{const l=i.match(/^\s+/);if(l===null)return i;const[r]=l;return r.length>=n.length?i.slice(n.length):i}).join(`
`)}class Ge{constructor(e){O(this,"options");O(this,"rules");O(this,"lexer");this.options=e||ke}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const n=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:qe(n,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const n=t[0],i=Jn(n,t[3]||"");return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(/#$/.test(n)){const i=qe(n,"#");(this.options.pedantic||!i||/ $/.test(i))&&(n=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const n=qe(t[0].replace(/^ *>[ \t]?/gm,""),`
`),i=this.lexer.state.top;this.lexer.state.top=!0;const l=this.lexer.blockTokens(n);return this.lexer.state.top=i,{type:"blockquote",raw:t[0],tokens:l,text:n}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim();const i=n.length>1,l={type:"list",raw:"",ordered:i,start:i?+n.slice(0,-1):"",loose:!1,items:[]};n=i?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=i?n:"[*+-]");const r=new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`);let o="",a="",c=!1;for(;e;){let p=!1;if(!(t=r.exec(e))||this.rules.block.hr.test(e))break;o=t[0],e=e.substring(o.length);let u=t[2].split(`
`,1)[0].replace(/^\t+/,$=>" ".repeat(3*$.length)),h=e.split(`
`,1)[0],m=0;this.options.pedantic?(m=2,a=u.trimStart()):(m=t[2].search(/[^ ]/),m=m>4?1:m,a=u.slice(m),m+=t[1].length);let g=!1;if(!u&&/^ *$/.test(h)&&(o+=h+`
`,e=e.substring(h.length+1),p=!0),!p){const $=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),I=new RegExp(`^ {0,${Math.min(3,m-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),w=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:\`\`\`|~~~)`),v=new RegExp(`^ {0,${Math.min(3,m-1)}}#`);for(;e;){const y=e.split(`
`,1)[0];if(h=y,this.options.pedantic&&(h=h.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),w.test(h)||v.test(h)||$.test(h)||I.test(e))break;if(h.search(/[^ ]/)>=m||!h.trim())a+=`
`+h.slice(m);else{if(g||u.search(/[^ ]/)>=4||w.test(u)||v.test(u)||I.test(u))break;a+=`
`+h}!g&&!h.trim()&&(g=!0),o+=y+`
`,e=e.substring(y.length+1),u=h.slice(m)}}l.loose||(c?l.loose=!0:/\n *\n *$/.test(o)&&(c=!0));let b=null,C;this.options.gfm&&(b=/^\[[ xX]\] /.exec(a),b&&(C=b[0]!=="[ ] ",a=a.replace(/^\[[ xX]\] +/,""))),l.items.push({type:"list_item",raw:o,task:!!b,checked:C,loose:!1,text:a,tokens:[]}),l.raw+=o}l.items[l.items.length-1].raw=o.trimEnd(),l.items[l.items.length-1].text=a.trimEnd(),l.raw=l.raw.trimEnd();for(let p=0;p<l.items.length;p++)if(this.lexer.state.top=!1,l.items[p].tokens=this.lexer.blockTokens(l.items[p].text,[]),!l.loose){const u=l.items[p].tokens.filter(m=>m.type==="space"),h=u.length>0&&u.some(m=>/\n.*\n/.test(m.raw));l.loose=h}if(l.loose)for(let p=0;p<l.items.length;p++)l.items[p].loose=!0;return l}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const n=t[1].toLowerCase().replace(/\s+/g," "),i=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",l=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:i,title:l}}}table(e){const t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;const n=Pt(t[1]),i=t[2].replace(/^\||\| *$/g,"").split("|"),l=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],r={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===i.length){for(const o of i)/^ *-+: *$/.test(o)?r.align.push("right"):/^ *:-+: *$/.test(o)?r.align.push("center"):/^ *:-+ *$/.test(o)?r.align.push("left"):r.align.push(null);for(const o of n)r.header.push({text:o,tokens:this.lexer.inline(o)});for(const o of l)r.rows.push(Pt(o,r.header.length).map(a=>({text:a,tokens:this.lexer.inline(a)})));return r}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:K(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const n=t[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;const r=qe(n.slice(0,-1),"\\");if((n.length-r.length)%2===0)return}else{const r=Vn(t[2],"()");if(r>-1){const a=(t[0].indexOf("!")===0?5:4)+t[1].length+r;t[2]=t[2].substring(0,r),t[0]=t[0].substring(0,a).trim(),t[3]=""}}let i=t[2],l="";if(this.options.pedantic){const r=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);r&&(i=r[1],l=r[3])}else l=t[3]?t[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(n)?i=i.slice(1):i=i.slice(1,-1)),Lt(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:l&&l.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){const i=(n[2]||n[1]).replace(/\s+/g," "),l=t[i.toLowerCase()];if(!l){const r=n[0].charAt(0);return{type:"text",raw:r,text:r}}return Lt(n,l,n[0],this.lexer)}}emStrong(e,t,n=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!i||i[3]&&n.match(/[\p{L}\p{N}]/u))return;if(!(i[1]||i[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const r=[...i[0]].length-1;let o,a,c=r,p=0;const u=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,t=t.slice(-1*e.length+r);(i=u.exec(t))!=null;){if(o=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!o)continue;if(a=[...o].length,i[3]||i[4]){c+=a;continue}else if((i[5]||i[6])&&r%3&&!((r+a)%3)){p+=a;continue}if(c-=a,c>0)continue;a=Math.min(a,a+c+p);const h=[...i[0]][0].length,m=e.slice(0,r+i.index+h+a);if(Math.min(r,a)%2){const b=m.slice(1,-1);return{type:"em",raw:m,text:b,tokens:this.lexer.inlineTokens(b)}}const g=m.slice(2,-2);return{type:"strong",raw:m,text:g,tokens:this.lexer.inlineTokens(g)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(/\n/g," ");const i=/[^ ]/.test(n),l=/^ /.test(n)&&/ $/.test(n);return i&&l&&(n=n.substring(1,n.length-1)),n=K(n,!0),{type:"codespan",raw:t[0],text:n}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let n,i;return t[2]==="@"?(n=K(t[1]),i="mailto:"+n):(n=K(t[1]),i=n),{type:"link",raw:t[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}url(e){var n;let t;if(t=this.rules.inline.url.exec(e)){let i,l;if(t[2]==="@")i=K(t[0]),l="mailto:"+i;else{let r;do r=t[0],t[0]=((n=this.rules.inline._backpedal.exec(t[0]))==null?void 0:n[0])??"";while(r!==t[0]);i=K(t[0]),t[1]==="www."?l="http://"+t[0]:l=t[0]}return{type:"link",raw:t[0],text:i,href:l,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let n;return this.lexer.state.inRawBlock?n=t[0]:n=K(t[0]),{type:"text",raw:t[0],text:n}}}}const Gn=/^(?: *(?:\n|$))+/,Xn=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,Kn=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,je=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Wn=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Kt=/(?:[*+-]|\d{1,9}[.)])/,Wt=q(/^(?!bull )((?:.|\n(?!\s*?\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Kt).getRegex(),rt=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Yn=/^[^\n]+/,ot=/(?!\s*\])(?:\\.|[^\[\]\\])+/,es=q(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",ot).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),ts=q(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Kt).getRegex(),We="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",at=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,ns=q("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",at).replace("tag",We).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Yt=q(rt).replace("hr",je).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",We).getRegex(),ss=q(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Yt).getRegex(),ct={blockquote:ss,code:Xn,def:es,fences:Kn,heading:Wn,hr:je,html:ns,lheading:Wt,list:ts,newline:Gn,paragraph:Yt,table:Ee,text:Yn},Nt=q("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",je).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",We).getRegex(),is={...ct,table:Nt,paragraph:q(rt).replace("hr",je).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Nt).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",We).getRegex()},ls={...ct,html:q(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",at).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ee,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:q(rt).replace("hr",je).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Wt).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},en=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,rs=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,tn=/^( {2,}|\\)\n(?!\s*$)/,os=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,De="\\p{P}$+<=>`^|~",as=q(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,De).getRegex(),cs=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,us=q(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,De).getRegex(),fs=q("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,De).getRegex(),ps=q("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,De).getRegex(),hs=q(/\\([punct])/,"gu").replace(/punct/g,De).getRegex(),ds=q(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),ms=q(at).replace("(?:-->|$)","-->").getRegex(),gs=q("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",ms).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Xe=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,ks=q(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Xe).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),nn=q(/^!?\[(label)\]\[(ref)\]/).replace("label",Xe).replace("ref",ot).getRegex(),sn=q(/^!?\[(ref)\](?:\[\])?/).replace("ref",ot).getRegex(),bs=q("reflink|nolink(?!\\()","g").replace("reflink",nn).replace("nolink",sn).getRegex(),ut={_backpedal:Ee,anyPunctuation:hs,autolink:ds,blockSkip:cs,br:tn,code:rs,del:Ee,emStrongLDelim:us,emStrongRDelimAst:fs,emStrongRDelimUnd:ps,escape:en,link:ks,nolink:sn,punctuation:as,reflink:nn,reflinkSearch:bs,tag:gs,text:os,url:Ee},_s={...ut,link:q(/^!?\[(label)\]\((.*?)\)/).replace("label",Xe).getRegex(),reflink:q(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Xe).getRegex()},nt={...ut,escape:q(en).replace("])","~|])").getRegex(),url:q(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},ws={...nt,br:q(tn).replace("{2,}","*").getRegex(),text:q(nt.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Fe={normal:ct,gfm:is,pedantic:ls},Se={normal:ut,gfm:nt,breaks:ws,pedantic:_s};class se{constructor(e){O(this,"tokens");O(this,"options");O(this,"state");O(this,"tokenizer");O(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||ke,this.options.tokenizer=this.options.tokenizer||new Ge,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:Fe.normal,inline:Se.normal};this.options.pedantic?(t.block=Fe.pedantic,t.inline=Se.pedantic):this.options.gfm&&(t.block=Fe.gfm,this.options.breaks?t.inline=Se.breaks:t.inline=Se.gfm),this.tokenizer.rules=t}static get rules(){return{block:Fe,inline:Se}}static lex(e,t){return new se(t).lex(e)}static lexInline(e,t){return new se(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const n=this.inlineQueue[t];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(o,a,c)=>a+"    ".repeat(c.length));let n,i,l,r;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(o=>(n=o.call({lexer:this},e,t))?(e=e.substring(n.raw.length),t.push(n),!0):!1))){if(n=this.tokenizer.space(e)){e=e.substring(n.raw.length),n.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(n);continue}if(n=this.tokenizer.code(e)){e=e.substring(n.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(n);continue}if(n=this.tokenizer.fences(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.heading(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.hr(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.blockquote(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.list(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.html(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.def(e)){e=e.substring(n.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+n.raw,i.text+=`
`+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if(n=this.tokenizer.table(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.lheading(e)){e=e.substring(n.raw.length),t.push(n);continue}if(l=e,this.options.extensions&&this.options.extensions.startBlock){let o=1/0;const a=e.slice(1);let c;this.options.extensions.startBlock.forEach(p=>{c=p.call({lexer:this},a),typeof c=="number"&&c>=0&&(o=Math.min(o,c))}),o<1/0&&o>=0&&(l=e.substring(0,o+1))}if(this.state.top&&(n=this.tokenizer.paragraph(l))){i=t[t.length-1],r&&i.type==="paragraph"?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(n),r=l.length!==e.length,e=e.substring(n.raw.length);continue}if(n=this.tokenizer.text(e)){e=e.substring(n.raw.length),i=t[t.length-1],i&&i.type==="text"?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(n);continue}if(e){const o="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let n,i,l,r=e,o,a,c;if(this.tokens.links){const p=Object.keys(this.tokens.links);if(p.length>0)for(;(o=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)p.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(o=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(o=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,o.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(a||(c=""),a=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(p=>(n=p.call({lexer:this},e,t))?(e=e.substring(n.raw.length),t.push(n),!0):!1))){if(n=this.tokenizer.escape(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.tag(e)){e=e.substring(n.raw.length),i=t[t.length-1],i&&n.type==="text"&&i.type==="text"?(i.raw+=n.raw,i.text+=n.text):t.push(n);continue}if(n=this.tokenizer.link(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(n.raw.length),i=t[t.length-1],i&&n.type==="text"&&i.type==="text"?(i.raw+=n.raw,i.text+=n.text):t.push(n);continue}if(n=this.tokenizer.emStrong(e,r,c)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.codespan(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.br(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.del(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.autolink(e)){e=e.substring(n.raw.length),t.push(n);continue}if(!this.state.inLink&&(n=this.tokenizer.url(e))){e=e.substring(n.raw.length),t.push(n);continue}if(l=e,this.options.extensions&&this.options.extensions.startInline){let p=1/0;const u=e.slice(1);let h;this.options.extensions.startInline.forEach(m=>{h=m.call({lexer:this},u),typeof h=="number"&&h>=0&&(p=Math.min(p,h))}),p<1/0&&p>=0&&(l=e.substring(0,p+1))}if(n=this.tokenizer.inlineText(l)){e=e.substring(n.raw.length),n.raw.slice(-1)!=="_"&&(c=n.raw.slice(-1)),a=!0,i=t[t.length-1],i&&i.type==="text"?(i.raw+=n.raw,i.text+=n.text):t.push(n);continue}if(e){const p="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(p);break}else throw new Error(p)}}return t}}class Ke{constructor(e){O(this,"options");this.options=e||ke}code(e,t,n){var l;const i=(l=(t||"").match(/^\S*/))==null?void 0:l[0];return e=e.replace(/\n$/,"")+`
`,i?'<pre><code class="language-'+K(i)+'">'+(n?e:K(e,!0))+`</code></pre>
`:"<pre><code>"+(n?e:K(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e,t){return e}heading(e,t,n){return`<h${t}>${e}</h${t}>
`}hr(){return`<hr>
`}list(e,t,n){const i=t?"ol":"ul",l=t&&n!==1?' start="'+n+'"':"";return"<"+i+l+`>
`+e+"</"+i+`>
`}listitem(e,t,n){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>
`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,t){const n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,t,n){const i=At(e);if(i===null)return n;e=i;let l='<a href="'+e+'"';return t&&(l+=' title="'+t+'"'),l+=">"+n+"</a>",l}image(e,t,n){const i=At(e);if(i===null)return n;e=i;let l=`<img src="${e}" alt="${n}"`;return t&&(l+=` title="${t}"`),l+=">",l}text(e){return e}}class ft{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,n){return""+n}image(e,t,n){return""+n}br(){return""}}class ie{constructor(e){O(this,"options");O(this,"renderer");O(this,"textRenderer");this.options=e||ke,this.options.renderer=this.options.renderer||new Ke,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new ft}static parse(e,t){return new ie(t).parse(e)}static parseInline(e,t){return new ie(t).parseInline(e)}parse(e,t=!0){let n="";for(let i=0;i<e.length;i++){const l=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[l.type]){const r=l,o=this.options.extensions.renderers[r.type].call({parser:this},r);if(o!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(r.type)){n+=o||"";continue}}switch(l.type){case"space":continue;case"hr":{n+=this.renderer.hr();continue}case"heading":{const r=l;n+=this.renderer.heading(this.parseInline(r.tokens),r.depth,Hn(this.parseInline(r.tokens,this.textRenderer)));continue}case"code":{const r=l;n+=this.renderer.code(r.text,r.lang,!!r.escaped);continue}case"table":{const r=l;let o="",a="";for(let p=0;p<r.header.length;p++)a+=this.renderer.tablecell(this.parseInline(r.header[p].tokens),{header:!0,align:r.align[p]});o+=this.renderer.tablerow(a);let c="";for(let p=0;p<r.rows.length;p++){const u=r.rows[p];a="";for(let h=0;h<u.length;h++)a+=this.renderer.tablecell(this.parseInline(u[h].tokens),{header:!1,align:r.align[h]});c+=this.renderer.tablerow(a)}n+=this.renderer.table(o,c);continue}case"blockquote":{const r=l,o=this.parse(r.tokens);n+=this.renderer.blockquote(o);continue}case"list":{const r=l,o=r.ordered,a=r.start,c=r.loose;let p="";for(let u=0;u<r.items.length;u++){const h=r.items[u],m=h.checked,g=h.task;let b="";if(h.task){const C=this.renderer.checkbox(!!m);c?h.tokens.length>0&&h.tokens[0].type==="paragraph"?(h.tokens[0].text=C+" "+h.tokens[0].text,h.tokens[0].tokens&&h.tokens[0].tokens.length>0&&h.tokens[0].tokens[0].type==="text"&&(h.tokens[0].tokens[0].text=C+" "+h.tokens[0].tokens[0].text)):h.tokens.unshift({type:"text",text:C+" "}):b+=C+" "}b+=this.parse(h.tokens,c),p+=this.renderer.listitem(b,g,!!m)}n+=this.renderer.list(p,o,a);continue}case"html":{const r=l;n+=this.renderer.html(r.text,r.block);continue}case"paragraph":{const r=l;n+=this.renderer.paragraph(this.parseInline(r.tokens));continue}case"text":{let r=l,o=r.tokens?this.parseInline(r.tokens):r.text;for(;i+1<e.length&&e[i+1].type==="text";)r=e[++i],o+=`
`+(r.tokens?this.parseInline(r.tokens):r.text);n+=t?this.renderer.paragraph(o):o;continue}default:{const r='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(r),"";throw new Error(r)}}}return n}parseInline(e,t){t=t||this.renderer;let n="";for(let i=0;i<e.length;i++){const l=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[l.type]){const r=this.options.extensions.renderers[l.type].call({parser:this},l);if(r!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(l.type)){n+=r||"";continue}}switch(l.type){case"escape":{const r=l;n+=t.text(r.text);break}case"html":{const r=l;n+=t.html(r.text);break}case"link":{const r=l;n+=t.link(r.href,r.title,this.parseInline(r.tokens,t));break}case"image":{const r=l;n+=t.image(r.href,r.title,r.text);break}case"strong":{const r=l;n+=t.strong(this.parseInline(r.tokens,t));break}case"em":{const r=l;n+=t.em(this.parseInline(r.tokens,t));break}case"codespan":{const r=l;n+=t.codespan(r.text);break}case"br":{n+=t.br();break}case"del":{const r=l;n+=t.del(this.parseInline(r.tokens,t));break}case"text":{const r=l;n+=t.text(r.text);break}default:{const r='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(r),"";throw new Error(r)}}}return n}}class Ae{constructor(e){O(this,"options");this.options=e||ke}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}}O(Ae,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var ge,st,ln;class vs{constructor(...e){ht(this,ge);O(this,"defaults",lt());O(this,"options",this.setOptions);O(this,"parse",Me(this,ge,st).call(this,se.lex,ie.parse));O(this,"parseInline",Me(this,ge,st).call(this,se.lexInline,ie.parseInline));O(this,"Parser",ie);O(this,"Renderer",Ke);O(this,"TextRenderer",ft);O(this,"Lexer",se);O(this,"Tokenizer",Ge);O(this,"Hooks",Ae);this.use(...e)}walkTokens(e,t){var i,l;let n=[];for(const r of e)switch(n=n.concat(t.call(this,r)),r.type){case"table":{const o=r;for(const a of o.header)n=n.concat(this.walkTokens(a.tokens,t));for(const a of o.rows)for(const c of a)n=n.concat(this.walkTokens(c.tokens,t));break}case"list":{const o=r;n=n.concat(this.walkTokens(o.items,t));break}default:{const o=r;(l=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&l[o.type]?this.defaults.extensions.childTokens[o.type].forEach(a=>{const c=o[a].flat(1/0);n=n.concat(this.walkTokens(c,t))}):o.tokens&&(n=n.concat(this.walkTokens(o.tokens,t)))}}return n}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{const i={...n};if(i.async=this.defaults.async||i.async||!1,n.extensions&&(n.extensions.forEach(l=>{if(!l.name)throw new Error("extension name required");if("renderer"in l){const r=t.renderers[l.name];r?t.renderers[l.name]=function(...o){let a=l.renderer.apply(this,o);return a===!1&&(a=r.apply(this,o)),a}:t.renderers[l.name]=l.renderer}if("tokenizer"in l){if(!l.level||l.level!=="block"&&l.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const r=t[l.level];r?r.unshift(l.tokenizer):t[l.level]=[l.tokenizer],l.start&&(l.level==="block"?t.startBlock?t.startBlock.push(l.start):t.startBlock=[l.start]:l.level==="inline"&&(t.startInline?t.startInline.push(l.start):t.startInline=[l.start]))}"childTokens"in l&&l.childTokens&&(t.childTokens[l.name]=l.childTokens)}),i.extensions=t),n.renderer){const l=this.defaults.renderer||new Ke(this.defaults);for(const r in n.renderer){if(!(r in l))throw new Error(`renderer '${r}' does not exist`);if(r==="options")continue;const o=r,a=n.renderer[o],c=l[o];l[o]=(...p)=>{let u=a.apply(l,p);return u===!1&&(u=c.apply(l,p)),u||""}}i.renderer=l}if(n.tokenizer){const l=this.defaults.tokenizer||new Ge(this.defaults);for(const r in n.tokenizer){if(!(r in l))throw new Error(`tokenizer '${r}' does not exist`);if(["options","rules","lexer"].includes(r))continue;const o=r,a=n.tokenizer[o],c=l[o];l[o]=(...p)=>{let u=a.apply(l,p);return u===!1&&(u=c.apply(l,p)),u}}i.tokenizer=l}if(n.hooks){const l=this.defaults.hooks||new Ae;for(const r in n.hooks){if(!(r in l))throw new Error(`hook '${r}' does not exist`);if(r==="options")continue;const o=r,a=n.hooks[o],c=l[o];Ae.passThroughHooks.has(r)?l[o]=p=>{if(this.defaults.async)return Promise.resolve(a.call(l,p)).then(h=>c.call(l,h));const u=a.call(l,p);return c.call(l,u)}:l[o]=(...p)=>{let u=a.apply(l,p);return u===!1&&(u=c.apply(l,p)),u}}i.hooks=l}if(n.walkTokens){const l=this.defaults.walkTokens,r=n.walkTokens;i.walkTokens=function(o){let a=[];return a.push(r.call(this,o)),l&&(a=a.concat(l.call(this,o))),a}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return se.lex(e,t??this.defaults)}parser(e,t){return ie.parse(e,t??this.defaults)}}ge=new WeakSet,st=function(e,t){return(n,i)=>{const l={...i},r={...this.defaults,...l};this.defaults.async===!0&&l.async===!1&&(r.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),r.async=!0);const o=Me(this,ge,ln).call(this,!!r.silent,!!r.async);if(typeof n>"u"||n===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(r.hooks&&(r.hooks.options=r),r.async)return Promise.resolve(r.hooks?r.hooks.preprocess(n):n).then(a=>e(a,r)).then(a=>r.hooks?r.hooks.processAllTokens(a):a).then(a=>r.walkTokens?Promise.all(this.walkTokens(a,r.walkTokens)).then(()=>a):a).then(a=>t(a,r)).then(a=>r.hooks?r.hooks.postprocess(a):a).catch(o);try{r.hooks&&(n=r.hooks.preprocess(n));let a=e(n,r);r.hooks&&(a=r.hooks.processAllTokens(a)),r.walkTokens&&this.walkTokens(a,r.walkTokens);let c=t(a,r);return r.hooks&&(c=r.hooks.postprocess(c)),c}catch(a){return o(a)}}},ln=function(e,t){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const i="<p>An error occurred:</p><pre>"+K(n.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(n);throw n}};const me=new vs;function j(s,e){return me.parse(s,e)}j.options=j.setOptions=function(s){return me.setOptions(s),j.defaults=me.defaults,Jt(j.defaults),j};j.getDefaults=lt;j.defaults=ke;j.use=function(...s){return me.use(...s),j.defaults=me.defaults,Jt(j.defaults),j};j.walkTokens=function(s,e){return me.walkTokens(s,e)};j.parseInline=me.parseInline;j.Parser=ie;j.parser=ie.parse;j.Renderer=Ke;j.TextRenderer=ft;j.Lexer=se;j.lexer=se.lex;j.Tokenizer=Ge;j.Hooks=Ae;j.parse=j;j.options;j.setOptions;j.use;j.walkTokens;j.parseInline;ie.parse;se.lex;function ys(s){let e,t=(s[0]||"<p>No summary available.</p>")+"";return{c(){e=k("div"),d(e,"class","summary-content svelte-t2dr86")},m(n,i){M(n,e,i),e.innerHTML=t},p(n,[i]){i&1&&t!==(t=(n[0]||"<p>No summary available.</p>")+"")&&(e.innerHTML=t)},i:H,o:H,d(n){n&&D(e)}}}function xs(s,e,t){let{conversation:n}=e,i="";xe(()=>{var r;(r=n==null?void 0:n.transcript)!=null&&r.summary&&l(n.transcript.summary)});function l(r){if(!r){t(0,i="<p>No summary available.</p>");return}try{j.setOptions({breaks:!0,gfm:!0,headerIds:!1,mangle:!1}),t(0,i=j.parse(r))}catch(o){console.error("Error rendering markdown:",o),t(0,i=`<div class="markdown-content">${r.replace(/\n/g,"<br>")}</div>`)}}return s.$$set=r=>{"conversation"in r&&t(1,n=r.conversation)},s.$$.update=()=>{var r;s.$$.dirty&2&&(r=n==null?void 0:n.transcript)!=null&&r.summary&&l(n.transcript.summary)},[i,n]}class $s extends ae{constructor(e){super(),oe(this,e,xs,ys,ee,{conversation:1})}}function jt(s,e,t){const n=s.slice();return n[2]=e[t],n}function Ts(s){let e;return{c(){e=k("p"),e.textContent="No action items available."},m(t,n){M(t,e,n)},p:H,d(t){t&&D(e)}}}function zs(s){let e,t=ue(s[0]),n=[];for(let i=0;i<t.length;i+=1)n[i]=Dt(jt(s,t,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=Le()},m(i,l){for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(i,l);M(i,e,l)},p(i,l){if(l&1){t=ue(i[0]);let r;for(r=0;r<t.length;r+=1){const o=jt(i,t,r);n[r]?n[r].p(o,l):(n[r]=Dt(o),n[r].c(),n[r].m(e.parentNode,e))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}},d(i){i&&D(e),Ue(n,i)}}}function Dt(s){let e,t,n=(s[2].action||"Action item")+"",i,l,r,o,a,c=(s[2].assignee||"Unassigned")+"",p,u,h,m,g=(s[2].priority||"Medium")+"",b,C,$,I,w=(s[2].deadline||"Not specified")+"",v,y;return{c(){e=k("div"),t=k("h4"),i=U(n),l=S(),r=k("div"),o=k("strong"),o.textContent="Assignee:",a=S(),p=U(c),u=U(` |
          `),h=k("strong"),h.textContent="Priority:",m=S(),b=U(g),C=U(` |
          `),$=k("strong"),$.textContent="Deadline:",I=S(),v=U(w),y=S(),d(t,"class","svelte-gh7wxt"),d(r,"class","action-item-meta svelte-gh7wxt"),d(e,"class","action-item svelte-gh7wxt")},m(z,N){M(z,e,N),f(e,t),f(t,i),f(e,l),f(e,r),f(r,o),f(r,a),f(r,p),f(r,u),f(r,h),f(r,m),f(r,b),f(r,C),f(r,$),f(r,I),f(r,v),f(e,y)},p(z,N){N&1&&n!==(n=(z[2].action||"Action item")+"")&&G(i,n),N&1&&c!==(c=(z[2].assignee||"Unassigned")+"")&&G(p,c),N&1&&g!==(g=(z[2].priority||"Medium")+"")&&G(b,g),N&1&&w!==(w=(z[2].deadline||"Not specified")+"")&&G(v,w)},d(z){z&&D(e)}}}function Cs(s){let e;function t(l,r){return l[0].length>0?zs:Ts}let n=t(s),i=n(s);return{c(){e=k("div"),i.c(),d(e,"class","action-items-content svelte-gh7wxt")},m(l,r){M(l,e,r),i.m(e,null)},p(l,[r]){n===(n=t(l))&&i?i.p(l,r):(i.d(1),i=n(l),i&&(i.c(),i.m(e,null)))},i:H,o:H,d(l){l&&D(e),i.d()}}}function Ss(s,e,t){let n,{conversation:i}=e;return s.$$set=l=>{"conversation"in l&&t(1,i=l.conversation)},s.$$.update=()=>{var l;s.$$.dirty&2&&t(0,n=((l=i==null?void 0:i.transcript)==null?void 0:l.action_items)||[])},[n,i]}class Rs extends ae{constructor(e){super(),oe(this,e,Ss,Cs,ee,{conversation:1})}}function Mt(s){let e,t,n,i=(s[0].title||`Conversation ${s[0].id}`)+"",l,r,o,a,c,p,u,h,m,g,b,C,$,I,w=s[3]&&Bt(s),v=s[2]&&qt(s),y=s[0].audio_file_path&&Ft(s);const z=[As,Es,Is],N=[];function R(_,L){return _[1]==="transcript"?0:_[1]==="summary"?1:_[1]==="actionItems"?2:-1}return~(g=R(s))&&(b=N[g]=z[g](s)),{c(){e=k("div"),t=k("div"),n=k("h2"),l=U(i),r=S(),o=k("div"),a=k("button"),a.textContent="Transcript",c=S(),w&&w.c(),p=S(),v&&v.c(),u=S(),y&&y.c(),h=S(),m=k("div"),b&&b.c(),d(n,"class","svelte-1bd7i19"),d(a,"class","tab-btn svelte-1bd7i19"),le(a,"active",s[1]==="transcript"),d(o,"class","tab-navigation svelte-1bd7i19"),d(t,"class","content-header svelte-1bd7i19"),d(m,"class","tab-content svelte-1bd7i19"),d(e,"class","conversation-content svelte-1bd7i19")},m(_,L){M(_,e,L),f(e,t),f(t,n),f(n,l),f(t,r),f(t,o),f(o,a),f(o,c),w&&w.m(o,null),f(o,p),v&&v.m(o,null),f(e,u),y&&y.m(e,null),f(e,h),f(e,m),~g&&N[g].m(m,null),C=!0,$||(I=A(a,"click",s[5]),$=!0)},p(_,L){(!C||L&1)&&i!==(i=(_[0].title||`Conversation ${_[0].id}`)+"")&&G(l,i),(!C||L&2)&&le(a,"active",_[1]==="transcript"),_[3]?w?w.p(_,L):(w=Bt(_),w.c(),w.m(o,p)):w&&(w.d(1),w=null),_[2]?v?v.p(_,L):(v=qt(_),v.c(),v.m(o,null)):v&&(v.d(1),v=null),_[0].audio_file_path?y?(y.p(_,L),L&1&&Z(y,1)):(y=Ft(_),y.c(),Z(y,1),y.m(e,h)):y&&($e(),V(y,1,1,()=>{y=null}),Te());let x=g;g=R(_),g===x?~g&&N[g].p(_,L):(b&&($e(),V(N[x],1,1,()=>{N[x]=null}),Te()),~g?(b=N[g],b?b.p(_,L):(b=N[g]=z[g](_),b.c()),Z(b,1),b.m(m,null)):b=null)},i(_){C||(Z(y),Z(b),C=!0)},o(_){V(y),V(b),C=!1},d(_){_&&D(e),w&&w.d(),v&&v.d(),y&&y.d(),~g&&N[g].d(),$=!1,I()}}}function Bt(s){let e,t,n;return{c(){e=k("button"),e.textContent="Summary",d(e,"class","tab-btn svelte-1bd7i19"),le(e,"active",s[1]==="summary")},m(i,l){M(i,e,l),t||(n=A(e,"click",s[6]),t=!0)},p(i,l){l&2&&le(e,"active",i[1]==="summary")},d(i){i&&D(e),t=!1,n()}}}function qt(s){let e,t,n;return{c(){e=k("button"),e.textContent="Action Items",d(e,"class","tab-btn svelte-1bd7i19"),le(e,"active",s[1]==="actionItems")},m(i,l){M(i,e,l),t||(n=A(e,"click",s[7]),t=!0)},p(i,l){l&2&&le(e,"active",i[1]==="actionItems")},d(i){i&&D(e),t=!1,n()}}}function Ft(s){let e,t;return e=new Ln({props:{conversationId:s[0].id}}),{c(){re(e.$$.fragment)},m(n,i){te(e,n,i),t=!0},p(n,i){const l={};i&1&&(l.conversationId=n[0].id),e.$set(l)},i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){V(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function Is(s){let e,t;return e=new Rs({props:{conversation:s[0]}}),{c(){re(e.$$.fragment)},m(n,i){te(e,n,i),t=!0},p(n,i){const l={};i&1&&(l.conversation=n[0]),e.$set(l)},i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){V(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function Es(s){let e,t;return e=new $s({props:{conversation:s[0]}}),{c(){re(e.$$.fragment)},m(n,i){te(e,n,i),t=!0},p(n,i){const l={};i&1&&(l.conversation=n[0]),e.$set(l)},i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){V(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function As(s){let e,t;return e=new qn({props:{conversation:s[0]}}),{c(){re(e.$$.fragment)},m(n,i){te(e,n,i),t=!0},p(n,i){const l={};i&1&&(l.conversation=n[0]),e.$set(l)},i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){V(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function Ps(s){let e,t,n=s[0]&&Mt(s);return{c(){n&&n.c(),e=Le()},m(i,l){n&&n.m(i,l),M(i,e,l),t=!0},p(i,[l]){i[0]?n?(n.p(i,l),l&1&&Z(n,1)):(n=Mt(i),n.c(),Z(n,1),n.m(e.parentNode,e)):n&&($e(),V(n,1,1,()=>{n=null}),Te())},i(i){t||(Z(n),t=!0)},o(i){V(n),t=!1},d(i){i&&D(e),n&&n.d(i)}}}function Ls(s,e,t){let n,i;Ne();let l="transcript",r=null;xe(()=>{ve.subscribe(u=>{var h;t(0,r=u),(h=u==null?void 0:u.transcript)!=null&&h.summary&&setTimeout(()=>{t(1,l="summary")},500)})});function o(u){t(1,l=u)}const a=()=>o("transcript"),c=()=>o("summary"),p=()=>o("actionItems");return s.$$.update=()=>{var u,h;s.$$.dirty&1&&t(3,n=(u=r==null?void 0:r.transcript)==null?void 0:u.summary),s.$$.dirty&1&&t(2,i=(h=r==null?void 0:r.transcript)==null?void 0:h.action_items)},[r,l,i,n,o,a,c,p]}class Ns extends ae{constructor(e){super(),oe(this,e,Ls,Ps,ee,{})}}function js(s){let e,t;return e=new Vt({}),e.$on("conversationReady",s[3]),{c(){re(e.$$.fragment)},m(n,i){te(e,n,i),t=!0},p:H,i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){V(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function Ds(s){let e,t;return e=new Ns({}),{c(){re(e.$$.fragment)},m(n,i){te(e,n,i),t=!0},p:H,i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){V(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function Ms(s){let e,t;return e=new Vt({}),e.$on("conversationReady",s[3]),{c(){re(e.$$.fragment)},m(n,i){te(e,n,i),t=!0},p:H,i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){V(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function Bs(s){let e,t,n,i,l,r,o;t=new Rn({}),t.$on("showUpload",s[2]);const a=[Ms,Ds,js],c=[];function p(u,h){return u[0]?0:u[1]?1:2}return l=p(s),r=c[l]=a[l](s),{c(){e=k("div"),re(t.$$.fragment),n=S(),i=k("main"),r.c(),d(i,"class","main-content svelte-t63m0u"),d(e,"class","app-container svelte-t63m0u")},m(u,h){M(u,e,h),te(t,e,null),f(e,n),f(e,i),c[l].m(i,null),o=!0},p(u,[h]){let m=l;l=p(u),l===m?c[l].p(u,h):($e(),V(c[m],1,1,()=>{c[m]=null}),Te(),r=c[l],r?r.p(u,h):(r=c[l]=a[l](u),r.c()),Z(r,1),r.m(i,null))},i(u){o||(Z(t.$$.fragment,u),Z(r),o=!0)},o(u){V(t.$$.fragment,u),V(r),o=!1},d(u){u&&D(e),ne(t),c[l].d()}}}function qs(s,e,t){let n;ce(s,ve,p=>t(1,n=p));let i=!0;xe(async()=>{await l(),r()});async function l(){try{const p=await W.get("/profiles");Ie.set(p||[])}catch(p){console.error("Failed to load profiles:",p)}}function r(){const p=localStorage.getItem("activeProfileId");p?Ie.subscribe(u=>{const h=u.find(m=>m.id===parseInt(p));h?pe.set(h):u.length>0&&pe.set(u[0])})():Ie.subscribe(u=>{u.length>0&&pe.set(u[0])})()}function o(){t(0,i=!0),ve.set(null)}function a({conversationId:p}){c(p)}async function c(p){try{const u=await W.get(`/conversations/${p}`);ve.set(u),t(0,i=!1)}catch(u){console.error("Failed to load conversation:",u)}}return xe(()=>{typeof window<"u"&&window.addEventListener("message",p=>{const u=p.detail;(u==null?void 0:u.type)==="loadConversation"?c(u.conversationId):(u==null?void 0:u.type)==="showUpload"&&o()})}),s.$$.update=()=>{s.$$.dirty&3&&(i?ve.set(null):n&&t(0,i=!1))},[i,n,o,a]}class Fs extends ae{constructor(e){super(),oe(this,e,qs,Bs,ee,{})}}new Fs({target:document.getElementById("app")||document.body});
